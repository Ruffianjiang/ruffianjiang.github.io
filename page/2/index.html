<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/11/30/50-java%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93(%E9%95%BF%E6%9C%9F)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/11/30/50-java%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93(%E9%95%BF%E6%9C%9F)/" class="post-title-link" itemprop="url">java面试题库(长期)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-11-30 09:37:00" itemprop="dateCreated datePublished" datetime="2018-11-30T09:37:00+08:00">2018-11-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文内容来自互联网各种面试实例，以及自己的面试经历，主要是中级开发的面试题</p>
<p>初中级java面试主要分为几个部分：</p>
<p>0、序<br>1、<a href="">java基础</a><br>2、 <a href="">java多线程</a><br>3、 <a href="">jvm知识</a><br>4、 <a href="">spring等框架知识</a><br>5、 <a href="">常用实践，如session同步</a><br>6、 <a href="">其他知识，例如tomcat</a><br>7、 <a href="">笔试算法</a>  </p>
<h2 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h2><p>首先，外貌要干净整洁，这个是必须的。其次守时，既不能晚点也不能早到，最好在约定时间的前十分钟<br>面试主要分为几个部分，首先是java基础，这类占比</p>
<p>较少<br>；其次是对java及spring框架的的深入理解，如多线程，ioc，apo，spring bean的生命周期，这类占比</p>
<p>较重<br>；再往后就是常用的工具的理解，如jvm的常用配置，年轻代老年代，gc，tomcat等容器怎么处理请求，这类问题占比</p>
<p>适中<br>；最后就是一些广度的问题(实际的经验)，对自己项目的理解，用到了那些工具，遇到了哪些问题,解决的方法<br>最后，一定要做一些面试的准备，刷面试题、练习面试，建议至少提前一个月做准备，机会是留给有准备的人的</p>
<h2 id="1、java基础"><a href="#1、java基础" class="headerlink" title="1、java基础"></a>1、java基础</h2><p><strong>1.1、List、Set、Map的异同</strong><br><strong>List(列表)</strong></p>
<p>List<br>的元素以线性方式存储，可以存放重复对象，List主要有以下两个实现类：</p>
<dl><dt>ArrayList</dt><dd>长度可变的数组，可以对元素进行随机的访问，向ArrayList中插入与删除元素的速度慢。 JDK8 中ArrayList扩容的实现是通过grow()方法里使用语句newCapacity &#x3D; oldCapacity + (oldCapacity &gt;&gt; 1)（即1.5倍扩容）计算容量，然后调用Arrays.copyof()方法进行对原数组进行复制。</dd></dl><dl><dt>LinkedList</dt><dd>采用链表数据结构，插入和删除速度快，但访问速度慢。</dd></dl><p><strong>Set(集合)</strong></p>
<p>Set<br>中的对象不按特定(HashCode)的方式排序，并且没有重复对象，Set主要有以下两个实现类：</p>
<p>HashSet<br>： HashSet按照哈希算法来存取集合中的对象，存取速度比较快。当HashSet中的元素个数超过数组大小&#x2F;*loadFactor（默认值为0.75）时，就会进行近似两倍扩容（newCapacity &#x3D; (oldCapacity &lt;&lt; 1) + 1）。</p>
<p>TreeSet<br>：TreeSet实现了SortedSet接口，能够对集合中的对象进行排序。</p>
<p><strong>Map(映射)</strong></p>
<p>Map<br>是一种把键对象和值对象映射的集合，它的每一个元素都包含一个键对象和值对象。 Map主要有以下两个实现类：</p>
<p>HashMap<br>：HashMap基于散列表实现，其插入和查询&lt;K,V&gt;的开销是固定的，可以通过构造器设置容量和负载因子来调整容器的性能。<br>LinkedHashMap：类似于HashMap，但是迭代遍历它时，取得&lt;K,V&gt;的顺序是其插入次序，或者是最近最少使用(LRU)的次序。</p>
<p>TreeMap<br>：TreeMap基于红黑树实现。查看&lt;K,V&gt;时，它们会被排序。TreeMap是唯一的带有subMap()方法的Map，subMap()可以返回一个子树。<br>比较 List Set Map 继承接口 Collection Collection 常见实现类 AbstractList(其常用子类有ArrayList、LinkedList、Vector) AbstractSet(其常用子类有HashSet、LinkedHashSet、TreeSet) HashMap、HashTable 常见方法 add( )、remove( )、clear( )、get( )、contains( )、size( ) add( )、remove( )、clear( )、contains( )、size( ) put( )、get()、remove( )、clear( )、containsKey( )、containsValue( )、keySet( )、values( )、size( ) 元素 可重复 不可重复(用<br>equals()判断) 不可重复 顺序 有序 无序(实际上由HashCode决定) 线程安全 Vector线程安全  Hashtable线程安全</p>
<p><strong>1.2、String、StringBuffer、StringBuilder的使用</strong></p>
<p><strong>1.3、HashMap、TreeMap、LinkedHashMap的特点</strong></p>
<p><strong>1.4、HashMap内部结构、算法</strong><br><strong>底层实现</strong>：HashMap底层整体结构是一个数组，数组中的每个元素又是一个链表。每次添加一个对象（put）时会产生一个链表对象（Object类型），Map中的每个Entry就是数组中的一个元素（Map.Entry就是一个&lt;Key,Value&gt;），它具有由当前元素指向下一个元素的引用，这就构成了链表。<br><strong>存储原理</strong>：当向HsahMap中添加元素的时候，先根据HashCode重新计算Key的Hash值，得到数组下标，如果数组该位置已经存在其他元素，那么这个位置的元素将会以链表的形式存放，新加入的放在链头，最先加入的放在链尾，如果数组该位置元素不存在，那么就直接将该元素放到此数组中的该位置。<br><strong>去重原理</strong>：不同的Key算到数组下标相同的几率很小，新建一个&lt;K,V&gt;放入到HashMap的时候，首先会计算Key的数组下标，如果数组该位置已经存在其他元素，则比较两个Key，若相同则覆盖写入，若不同则形成链表。<br><strong>读取原理</strong>：从HashMap中读取（get）元素时，首先计算Key的HashCode，找到数组下标，然后在对应位置的链表中找到需要的元素。<br><strong>扩容机制</strong>：当HashMap中的元素个数超过数组大小&#x2F;*loadFactor（默认值为0.75）时，就会进行2倍扩容（oldThr &lt;&lt; 1）。  </p>
<p><strong>1.5、concurrent包下面有那几大类</strong><br>atomic<br>locks<br>Executor<br>Queue<br>Dueue<br>ConcurrentXX<br>Scheduled<br>Callable<br>Future  </p>
<h2 id="2、java多线程"><a href="#2、java多线程" class="headerlink" title="2、java多线程"></a>2、java多线程</h2><p><strong>2.1、lock和synchronized</strong></p>
<p>synchronized是java中的一个关键字，也就是说是Java语言内置的特性。那么为什么会出现Lock呢？</p>
<p>在上面一篇文章中，我们了解到如果一个代码块被synchronized修饰了，当一个线程获取了对应的锁，并执行该代码块时，其他线程便只能一直等待，等待获取锁的线程释放锁，而这里获取锁的线程释放锁只会有两种情况：</p>
<p>1）获取锁的线程执行完了该代码块，然后线程释放对锁的占有；</p>
<p>2）线程执行发生异常，此时JVM会让线程自动释放锁。</p>
<p>那么如果这个获取锁的线程由于要等待IO或者其他原因（比如调用sleep方法）被阻塞了，但是又没有释放锁，其他线程便只能干巴巴地等待，试想一下，这多么影响程序执行效率。</p>
<p>因此就需要有一种机制可以不让等待的线程一直无期限地等待下去（比如只等待一定的时间或者能够响应中断），通过Lock就可以办到。</p>
<p>再举个例子：当有多个线程读写文件时，读操作和写操作会发生冲突现象，写操作和写操作会发生冲突现象，但是读操作和读操作不会发生冲突现象。</p>
<p>但是采用synchronized关键字来实现同步的话，就会导致一个问题：</p>
<p>如果多个线程都只是进行读操作，所以当一个线程在进行读操作时，其他线程只能等待无法进行读操作。</p>
<p>因此就需要一种机制来使得多个线程都只是进行读操作时，线程之间不会发生冲突，通过Lock就可以办到。</p>
<p>另外，通过Lock可以知道线程有没有成功获取到锁。这个是synchronized无法办到的。</p>
<p>总结一下，也就是说Lock提供了比synchronized更多的功能。但是要注意以下几点：</p>
<p>1）Lock不是Java语言内置的，synchronized是Java语言的关键字，因此是内置特性。Lock是一个类，通过这个类可以实现同步访问；</p>
<p>2）Lock和synchronized有一点非常大的不同，采用synchronized不需要用户去手动释放锁，当synchronized方法或者synchronized代码块执行完之后，系统会自动让线程释放对锁的占用；而Lock则必须要用户去手动释放锁，如果没有主动释放锁，就有可能导致出现死锁现象。</p>
<p>Lock是一个接口，而synchronized是关键字。<br>synchronized会自动释放锁，而Lock必须手动释放锁。<br>Lock可以让等待锁的线程响应中断，而synchronized不会，线程会一直等待下去。<br>通过Lock可以知道线程有没有拿到锁，而synchronized不能。<br>Lock能提高多个线程读操作的效率。  </p>
<p>synchronized能锁住类、方法和代码块，而Lock是块范围内的</p>
<p>第一大不足：由于我们没办法设置synchronized关键字在获取锁的时候等待时间，所以synchronized可能会导致线程为了加锁而无限期地处于阻塞状态。</p>
<p>第二大不足：使用synchronized关键字等同于使用了互斥锁，即其他线程都无法获得锁对象的访问权。这种策略对于读多写少的应用而言是很不利的，因为即使多个读者看似可以并发运行，但他们实际上还是串行的，并将最终导致并发性能的下降。</p>
<p>虽然synchronized已经作为一个关键字被固化在Java语言中了，但它只提供了一种相当保守的线程安全策略，且该策略开放给程序员的控制能力极弱。</p>
<p><strong>2.2、单机上一个线程池正在处理服务，如果忽然断电了怎么办（正在处理和阻塞队列里的请求怎么处理）？</strong></p>
<p><strong>2.3、为什么要使用线程池？</strong></p>
<p>在Java中，如果每当一个请求到达就创建一个新线程，开销是相当大的。在实际使用中，每个请求创建新线程的服务器在创建和销毁线程上花费的时间和消耗的系统资源，甚至可能要比花在处理实际的用户请求的时间和资源要多得多。除了创建和销毁线程的开销之外，活动的线程也需要消耗系统资源。如果在一个JVM里创建太多的线程，可能会导致系统由于过度消耗内存或“切换过度”而导致系统资源不足。为了防止资源不足，服务器应用程序需要一些办法来限制任何给定时刻处理的请求数目，尽可能减少创建和销毁线程的次数，特别是一些资源耗费比较大的线程的创建和销毁，尽量利用已有对象来进行服务，这就是“池化资源”技术产生的原因。</p>
<p><strong>2.4、线程池有什么作用？</strong></p>
<p>线程池主要用来解决线程生命周期开销问题和资源不足问题。通过对多个任务重用线程，线程创建的开销就被分摊到了多个任务上了，而且由于在请求到达时线程已经存在，所以消除了线程创建所带来的延迟。这样，就可以立即为请求服务，使应用程序响应更快。另外，通过适当地调整线程池中的线程数目可以防止出现资源不足的情况。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.使用new Thread()创建线程的弊端：  </span><br><span class="line">每次通过new Thread()创建对象性能不佳。  </span><br><span class="line">线程缺乏统一管理，可能无限制新建线程，相互之间竞争，及可能占用过多系统资源导致死机或oom。  </span><br><span class="line">缺乏更多功能，如定时执行、定期执行、线程中断。  </span><br><span class="line"></span><br><span class="line">2.使用Java线程池的好处：</span><br><span class="line">重用存在的线程，减少对象创建、消亡的开销，提升性能。  </span><br><span class="line">可有效控制最大并发线程数，提高系统资源的使用率，同时避免过多资源竞争，避免堵塞。  </span><br><span class="line">提供定时执行、定期执行、单线程、并发数控制等功能。</span><br></pre></td></tr></table></figure>

<p><strong>2.5、说说几种常见的线程池及使用场景。</strong><br>场景：<br>单个任务处理时间短<br>将需处理的任务数量大</p>
<p><strong>2.6、线程池都有哪几种工作队列？</strong><br>ArrayBlockingQueue 数组型阻塞队列<br>LinkedBlockingQueue 链表型阻塞队列<br>DelayQueue 延时队列<br>SynchronousQueue 同步队列<br>PriorityBlockingQueue 优先阻塞队列</p>
<p><strong>2.7、怎么理解无界队列和有界队列？</strong><br>有界队列：<br>1.初始的poolSize &lt; corePoolSize，提交的runnable任务，会直接做为new一个Thread的参数，立马执行 。</p>
<p>2.当提交的任务数超过了corePoolSize，会将当前的runable提交到一个block queue中,。</p>
<p>3.有界队列满了之后，如果poolSize &lt; maximumPoolsize时，会尝试new 一个Thread的进行救急处理，立马执行对应的runnable任务。</p>
<p>4.如果3中也无法处理了，就会走到第四步执行reject操作。</p>
<p>与有界队列相比，除非系统资源耗尽，否则无界的任务队列不存在任务入队失败的情况。当有新的任务到来，系统的线程数小于corePoolSize时，则新建线程执行任务。当达到corePoolSize后，就不会继续增加，若后续仍有新的任务加入，而没有空闲的线程资源，则任务直接进入队列等待。若任务创建和处理的速度差异很大，无界队列会保持快速增长，直到耗尽系统内存。</p>
<p><strong>2.8、线程池中的几种重要的参数及流程说明</strong></p>
<p>中止<br>：Abort策略，默认策略，新任务提交时直接抛出未检查的异常RejectedExecutionException，该异常可由调用者捕获。</p>
<p>抛弃<br>：Discard策略，新提交的任务被抛弃。</p>
<p>抛弃最旧的<br>：DiscardOldest策略，队列的是“队头”的任务，然后尝试提交新的任务。（不适合工作队列为优先队列场景）</p>
<p>调用者运行<br>： CallerRuns策略，为调节机制，既不抛弃任务也不抛出异常，而是将某些任务回退到调用者。不会在线程池的线程中执行新的任务，而是在调用exector的线程中运行新的任务。</p>
<p><strong>2.9、线程池中的几种重要的参数及流程说明</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public ThreadPoolExecutor(int corePoolSize,</span><br><span class="line">                              int maximumPoolSize,</span><br><span class="line">                              long keepAliveTime,</span><br><span class="line">                              TimeUnit unit,</span><br><span class="line">                              BlockingQueue&lt;Runnable&gt; workQueue,</span><br><span class="line">                              ThreadFactory threadFactory,</span><br><span class="line">                              RejectedExecutionHandler handler) &#123;</span><br><span class="line">       ...</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>corePoolSize</p>
<ul>
<li>池中所保存的线程数，包括空闲线程。需要注意的是在初创建线程池时线程不会立即启动，直到有任务提交才开始启动线程并逐渐时线程数目达到corePoolSize。若想一开始就创建所有核心线程需调用prestartAllCoreThreads方法。</li>
</ul>
<p>maximumPoolSize<br>-池中允许的最大线程数。需要注意的是当核心线程满且阻塞队列也满时才会判断当前线程数是否小于最大线程数，并决定是否创建新线程。</p>
<p>keepAliveTime</p>
<ul>
<li>当线程数大于核心时，多于的空闲线程最多存活时间</li>
</ul>
<p>unit</p>
<ul>
<li>keepAliveTime 参数的时间单位。</li>
</ul>
<p>workQueue</p>
<ul>
<li>当线程数目超过核心线程数时用于保存任务的队列。主要有3种类型的BlockingQueue可供选择：无界队列，有界队列和同步移交。将在下文中详细阐述。从参数中可以看到，此队列仅保存实现Runnable接口的任务。</li>
</ul>
<p>threadFactory</p>
<ul>
<li>执行程序创建新线程时使用的工厂。</li>
</ul>
<p>handler</p>
<ul>
<li>阻塞队列已满且线程数达到最大值时所采取的饱和策略。java默认提供了4种饱和策略的实现方式：中止、抛弃、抛弃最旧的、调用者运行。将在下文中详细阐述。</li>
</ul>
<p><strong>2.10、线程和cpu核心数的关系</strong>  </p>
<p>线程数&#x3D;Ncpu &#x2F; (1-阻塞系数)<br>IO密集型，阻塞系数接近于1<br>计算密集型，阻塞系数接近于0  </p>
<h2 id="3、jvm知识"><a href="#3、jvm知识" class="headerlink" title="3、jvm知识"></a>3、jvm知识</h2><p><strong>3.1、happened-before原则</strong></p>
<p>1.程序顺序规则：一个线程中的每个操作，happens-before于该线程中的任意后续操作</p>
<p>2.监视器锁规则：对一个锁的解锁，happens-before于随后对这个锁的加锁</p>
<p>3.volatile变量规则：对一个volatile域的写，happens-before于任意后续对这个volatile域的读</p>
<p>4.传递性：如果A happens-before B，且B happens-before C，那么A happens-before C</p>
<p>5.start规则：如果线程A执行操作ThreadB.start()（启动线程B），那么A线程的ThreadB.start()操作happens-before于线程B中的任意操作</p>
<p>6.join规则：如果线程A执行操作ThreadB.join()并成功返回，那么线程B中的任意操作happens-before于线程A从ThreadB.join()操作成功返回</p>
<p><strong>3.2、类的加载</strong></p>
<p><img src="/" alt="image"><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/wen7280/article/details/53856790">https://blog.csdn.net/wen7280/article/details/53856790</a></p>
<p>类装载的条件：</p>
<p>Java虚拟机不会无条件的装载Class类型。</p>
<p>Java虚拟机规定：一个类或者接口在初次使用时，必须进行初始化。</p>
<p>这里的使用指的是主动使用，主动使用有以下几种情况：</p>
<p>当创建一个类的实例时，比如使用new关键字，或者通过反射、克隆、反序列化方式。</p>
<p>当调用类的静态方法时，即当使用了字节码invokestatic指令  </p>
<p>当使用类或者接口的静态字段时（final常量除外，此种情况只会加载类而不会进行初始化），即使用getstatic或者putstatic指令（可以使用jclasslib软件查看生成的字节码文件）</p>
<p>当使用java.lang.reflect包中的方法反射类的方法时</p>
<p>当初始化子类时，必须先初始化父类</p>
<p>作为启动虚拟机、含有main方法的那个类</p>
<p>除了以上情况属于主动使用外，其他情况均属于被动使用，被动使用不会引起类的初始化，只是加载了类却没有初始化。</p>
<h2 id="4、spring等框架知识"><a href="#4、spring等框架知识" class="headerlink" title="4、spring等框架知识"></a>4、spring等框架知识</h2><p><strong>4.1、spring mvc处理请求</strong></p>
<p><img src="/" alt="image"></p>
<p>SpringMVC核心处理流程：</p>
<p>1、DispatcherServlet前端控制器接收发过来的请求，交给HandlerMapping处理器映射器</p>
<p>2、HandlerMapping处理器映射器，根据请求路径找到相应的HandlerAdapter处理器适配器（处理器适配器就是那些拦截器或Controller）</p>
<p>3、HandlerAdapter处理器适配器，处理一些功能请求，返回一个ModelAndView对象（包括模型数据、逻辑视图名）</p>
<p>4、ViewResolver视图解析器，先根据ModelAndView中设置的View解析具体视图</p>
<p>5、然后再将Model模型中的数据渲染到View上</p>
<p><strong>4.2、Springbootapplication注解的原理</strong></p>
<p><img src="/" alt="image"></p>
<p><a target="_blank" rel="noopener" href="http://majunwei.com/view/201708231840127244.html">http://majunwei.com/view/201708231840127244.html</a></p>
<h2 id="5、常用实践-session同步"><a href="#5、常用实践-session同步" class="headerlink" title="5、常用实践,session同步"></a>5、常用实践,session同步</h2><p><strong>5.1、session同步</strong></p>
<p>使用redis作为session持久化存储。首先用户连接进来，把session放在本地一份，redis一份，在本地有记录的情况下使用本地缓存(设置极小的时间过期，如2s)。当用户再次连接进来，在本地记录过期，或者本地没有session的情况下，使用redis的记录，</p>
<p><strong>5.2、redis的简单介绍</strong></p>
<p><strong>5.3、缓存的使用</strong></p>
<h2 id="6、其他知识-如tomcat"><a href="#6、其他知识-如tomcat" class="headerlink" title="6、其他知识,如tomcat"></a>6、其他知识,如tomcat</h2><p><strong>6.1、tomcat如何处理请求</strong></p>
<p><img src="https://images2017.cnblogs.com/blog/1131840/201712/1131840-20171215142449996-360033997.jpg" alt="http://images2017.cnblogs.com/blog/1131840/201712/1131840-20171215142449996-360033997.jpg"><br>Tomcat的两个核心组件：Connector 和 Container</p>
<p><strong>1.Connector组件</strong></p>
<p>Connector组件将在某个指定的端口上侦听客户请求，接收浏览器发过来的tcp连接请求，创建一个Request和一个Response对象分别用于和其你去端交换数据，然后会产生一个线程来处理这个请求并把产生的Request和Response对象传给Engine，从Engine中获得响应并返回给客户端。</p>
<p>Tomcat有两个经典的Connector，一个直接侦听来自浏览器的HTTP请求，另外一个侦听来自其他的WebServer的请求。Cotote HTTP&#x2F;1.1 Connector在端口8080处侦听来自客户浏览器的HTTP请求，Coyote JK2 Connector在端口8009处侦听其他WebServer的Servlet&#x2F;JSP请求。 Connector 最重要的功能就是接收连接请求然后分配线程让 Container来处理这个请求，所以这必然是多线程的，多线程的处理是 Connector 设计的核心</p>
<p><strong>2.Container组件</strong></p>
<p>Container组件的体系结构如下：<br><img src="https://images2017.cnblogs.com/blog/1131840/201712/1131840-20171215142450871-601807957.jpg" alt="http://images2017.cnblogs.com/blog/1131840/201712/1131840-20171215142450871-601807957.jpg"></p>
<p>Container</p>
<p>Container是容器的父接口，该容器的设计用的是典型的责任链的设计模式，它由四个自容器组件构成，分别是Engine、Host、Context、Wrapper。这四个组件是负责关系，存在包含关系。通常一个Servlet class对应一个Wrapper，如果有多个Servlet则定义多个Wrapper，如果有多个Wrapper就要定义一个更高的Container，如Context。 Context定义在父容器 Host 中，其中Host 不是必须的，但是要运行 war 程序，就必须要 Host，因为 war 中必有 web.xml 文件，这个文件的解析就需要 Host 了，如果要有多个 Host 就要定义一个 top 容器 Engine 了。而 Engine 没有父容器了，一个 Engine 代表一个完整的 Servlet 引擎。</p>
<p>Engine</p>
<p>Engine 容器比较简单，它只定义了一些基本的关联关系 Host 容器</p>
<p>Host</p>
<p>Host 是 Engine 的字容器，一个 Host 在 Engine 中代表一个虚拟主机，这个虚拟主机的作用就是运行多个应用，它负责安装和展开这些应用，并且标识这个应用以便能够区分它们。它的子容器通常是 Context，它除了关联子容器外，还有就是保存一个主机应该有的信息。</p>
<p>Context</p>
<p>Context 代表 Servlet 的 Context，它具备了 Servlet 运行的基本环境，理论上只要有 Context 就能运行 Servlet 了。简单的 Tomcat 可以没有 Engine 和 Host。Context 最重要的功能就是管理它里面的 Servlet 实例，Servlet 实例在 Context 中是以 Wrapper 出现的，还有一点就是 Context 如何才能找到正确的 Servlet 来执行它呢？ Tomcat5 以前是通过一个 Mapper 类来管理的，Tomcat5 以后这个功能被移到了 request 中，在前面的时序图中就可以发现获取子容器都是通过 request 来分配的</p>
<p>Wrapper</p>
<p>Wrapper 代表一个 Servlet，它负责管理一个 Servlet，包括的 Servlet 的装载、初始化、执行以及资源回收。Wrapper 是最底层的容器，它没有子容器了，所以调用它的 addChild 将会报错。 Wrapper 的实现类是 StandardWrapper，StandardWrapper 还实现了拥有一个 Servlet 初始化信息的 ServletConfig，由此看出 StandardWrapper 将直接和 Servlet 的各种信息打交道。<br>说明：除了上述组件外，Tomcat中还有其他重要的组件，如安全组件security、logger日志组件、session、mbeans、naming等其他组件。这些组件共同为Connector和Container提供必要的服务。</p>
<p>完整请求过程如下：</p>
<p><img src="https://images2017.cnblogs.com/blog/1131840/201712/1131840-20171215142451699-1297214931.jpg" alt="http://images2017.cnblogs.com/blog/1131840/201712/1131840-20171215142451699-1297214931.jpg"></p>
<p>1.用户在浏览器中输入网址localhost:8080&#x2F;test&#x2F;index.jsp，请求被发送到本机端口8080，被在那里监听的Coyote HTTP&#x2F;1.1 Connector获得；</p>
<p>2.Connector把该请求交给它所在的Service的Engine（Container）来处理，并等待Engine的回应；</p>
<p>3.Engine获得请求localhost&#x2F;test&#x2F;index.jsp，匹配所有的虚拟主机Host；</p>
<p>4.Engine匹配到名为localhost的Host（即使匹配不到也把请求交给该Host处理，因为该Host被定义为该Engine的默认主机），名为localhost的Host获得请求&#x2F;test&#x2F;index.jsp，匹配它所拥有的所有Context。Host匹配到路径为&#x2F;test的Context（如果匹配不到就把该请求交给路径名为“ ”的Context去处理）；</p>
<p>5.path&#x3D;“&#x2F;test”的Context获得请求&#x2F;index.jsp，在它的mapping table中寻找出对应的Servlet。Context匹配到URL Pattern为&#x2F;*.jsp的Servlet，对应于JspServlet类；</p>
<p>6.构造HttpServletRequest对象和HttpServletResponse对象，作为参数调用JspServlet的doGet()或doPost(),执行业务逻辑、数据存储等；</p>
<p>7.Context把执行完之后的HttpServletResponse对象返回给Host；</p>
<p>8.Host把HttpServletResponse对象返回给Engine；</p>
<p>9.Engine把HttpServletResponse对象返回Connector；</p>
<p>10.Connector把HttpServletResponse对象返回给客户Browser。</p>
<h2 id="7、笔试算法"><a href="#7、笔试算法" class="headerlink" title="7、笔试算法"></a>7、笔试算法</h2><p><strong>7.1、</strong></p>
<p><strong>7.2、</strong></p>
<p><strong>7.3、</strong></p>
<p><strong>7.4、让您做一个电商平台，您如何设置一个在买家下订单后的”第60秒“发短信通知卖家发货，您需要考虑的是 像淘宝一样的大并发量的订单。</strong></p>
<p>1、具有排序功能的队列</p>
<p>2、Redis+定时器</p>
<p>3、队列，死信</p>
<p>参考地址：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Dzv-i8n7waJVac-N7MJCvA">https://mp.weixin.qq.com/s/Dzv-i8n7waJVac-N7MJCvA</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/09/13/80-RSA%20premaster%20secret%20error%20%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/13/80-RSA%20premaster%20secret%20error%20%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/" class="post-title-link" itemprop="url">RSA premaster secret error 错误解决</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-09-13 14:57:00" itemprop="dateCreated datePublished" datetime="2018-09-13T14:57:00+08:00">2018-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>报错信息如下：<br>Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: 驱动程序无法使用安全套接字层(SSL)加密与 SQL Server 建立安全连接。错误: RSA premaster secret error。</p>
<p>java连接sqlserver报RSA私钥错误，在网上查询了一番基本是这两个解决方案</p>
<p>1、调整jdk的引用<br>2、把sunjce_provider.jar放到\jre\lib\ext下</p>
<p>我的问题是由于jdk的问题，gradle编译自动吧jdk换成了JavaSE，换成本地的JDK1.8，问题解决</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201809/670989-20180913145221230-988186623.png" alt="参考图片"></p>
<p><strong>问题原因</strong><br>由于</p>
<p>gradle<br>插件编译的问题，自动调整为java SE版本，导致引用问题，maven编译后虽然也是java SE版本，但是没有问题<br>还是要少用gradle</p>
<p>参考：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/huang9012/article/details/6629775">https://blog.csdn.net/huang9012/article/details/6629775</a></p>
<p><a target="_blank" rel="noopener" href="https://social.msdn.microsoft.com/Forums/sqlserver/zh-CN/031c5b4c-0871-4f12-a163-ce547035740c/error-connecting-to-mssql-via-jdbc-through-a-window-service?forum=sqldataaccess">https://social.msdn.microsoft.com/Forums/sqlserver/zh-CN/031c5b4c-0871-4f12-a163-ce547035740c/error-connecting-to-mssql-via-jdbc-through-a-window-service?forum=sqldataaccess</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/09/01/50-%E6%88%91%E7%9A%84%E4%BC%97%E5%AE%89%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%8E%86%EF%BC%88%E9%A2%98%E5%BA%93%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/09/01/50-%E6%88%91%E7%9A%84%E4%BC%97%E5%AE%89%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%8E%86%EF%BC%88%E9%A2%98%E5%BA%93%EF%BC%89/" class="post-title-link" itemprop="url">我的众安面试经历（题库）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-09-01 11:02:00" itemprop="dateCreated datePublished" datetime="2018-09-01T11:02:00+08:00">2018-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9D%A2%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">面试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>面试众安在线<br><strong>背景</strong>：两年java，面中级开发</p>
<p><strong>首先</strong>，是两道编程题，笔试<br>1、斐波那契数列，f(n)&#x3D;f(n-1)+f(n-2)，n足够大，获取f(n)的值<br>~<br>2、一个足够大的数组，有10E+个数字，怎么快速找到前10大的数字，时间复杂度是多少<br>~<br><strong>接着</strong>，面试官开始提问了<br>最近，华住数据泄漏事件知道吧<br>~<br>有一篇分析贴看了吧，假如你拿到了这些数据，你会从哪些方面去分析，拿到这些数据你会做什么，你有什么措施来防止这次的事件<br>~<br>加密算法，对称与非对称，<br>~<br>对于多线程的理解，多线程有什么优势<br>~<br>单核cpu如何执行多线程<br>~<br>多线程后台任务怎么保证任务完成了<br>~<br>执行时间长于执行周期的问题，例如每一秒执行一次，执行一次需要三秒<br>~<br>一个线程占用多少资源<br>~<br>支付过程加密用哪种<br>~<br>TCP&#x2F;UDP的区别<br>~<br>spring的设计模式<br>~<br>IOC、AOP的理解<br>~<br>多进程与多线程的区别<br>~<br>tomcat处理请求，对于线程进程的关系<br>~<br>tomcat处理请求的生命周期<br>~<br>讲一讲你们微服务是怎么搭建的，是按什么划分的，中间有经历什么<br>~<br>暂时就想起来这么多，后面有回忆起立的再补充</p>
<p><strong>最后</strong>，对面试官有什么要问的？<br>微服务架构：<br>hsf框架，加少量的dubbo和spring could</p>
<p>考核的标准：<br>业务完成情况、难易度，价值观，对新人的帮助，组内的沟通情况等等</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/08/21/150-%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%9B%BE%E7%89%87%EF%BC%88%E4%B8%89%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/21/150-%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%9B%BE%E7%89%87%EF%BC%88%E4%B8%89%EF%BC%89/" class="post-title-link" itemprop="url">图片转字符图片（三）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-08-21 01:11:00" itemprop="dateCreated datePublished" datetime="2018-08-21T01:11:00+08:00">2018-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/fun/" itemprop="url" rel="index"><span itemprop="name">fun</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h1><p>这个是从抖音上学来的，一开始刷抖音，遇到不少字符串跳舞的视频，因此来实践一下</p>
<h1 id="主要分为三个部分"><a href="#主要分为三个部分" class="headerlink" title="主要分为三个部分"></a>主要分为三个部分</h1><ol>
<li>静态图片转静态图片</li>
<li>gif转gif</li>
<li>视频转视频</li>
</ol>
<h1 id="视频转视频"><a href="#视频转视频" class="headerlink" title="视频转视频"></a>视频转视频</h1><p>主要用到了FFmpeg这个工具，利用命令对视频文件进行操作。首先根据自己调的参数进行图片的截取（本文的是1秒10帧的参数），图片转换，然后分离音频，最后字符图片和音频合成目标视频。</p>
<p>FFmpeg的代码库：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/FFmpeg/FFmpeg">https://github.com/FFmpeg/FFmpeg</a></p>
<p>FFmpeg下载地址：</p>
<p><a target="_blank" rel="noopener" href="https://ffmpeg.org/download.html">https://ffmpeg.org/download.html</a></p>
<p>本位使用的版本：</p>
<p><a target="_blank" rel="noopener" href="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/ffmpeg-20180201-b1af0e2-win64-static.zip">https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/ffmpeg-20180201-b1af0e2-win64-static.zip</a></p>
<h2 id="效果如下"><a href="#效果如下" class="headerlink" title="效果如下"></a>效果如下</h2><p>没做细致的调整，视频的转换可以调调参数  </p>
<p><a target="_blank" rel="noopener" href="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/123.mp4"><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/3-0.png?x-oss-process=style/default_blog" alt="Watch the video"></a> </p>
<p><a target="_blank" rel="noopener" href="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/1234.mp4"><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/3-1.png?x-oss-process=style/default_blog" alt="Watch the video"></a></p>
<h2 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">videoTest</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">srcVideoPath</span> <span class="operator">=</span> <span class="string">&quot;F:/123/123.mp4&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">tarImagePath</span> <span class="operator">=</span> <span class="string">&quot;F:/123/mp/&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">tarAudioPath</span> <span class="operator">=</span> <span class="string">&quot;F:/123/mp/audio.aac&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">tarVideoPath</span> <span class="operator">=</span> <span class="string">&quot;F:/123/1234.mp4&quot;</span>;</span><br><span class="line">    VideoUtil.readVideo(srcVideoPath,tarImagePath,tarAudioPath,tarVideoPath);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下"></a>代码如下</h2><p>主要用到的几个命令，其他按帧截图命令参考文末链接4：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 截图</span><br><span class="line">ffmpeg -ss 10 -i input.flv -y -f image2  -vframes 100 -s 352x240 b-%03d.jpg</span><br><span class="line">// 分离音频</span><br><span class="line">ffmpeg -i 3.mp4 -vn -y -acodec copy 3.aac</span><br><span class="line">// 合成视频</span><br><span class="line">ffmpeg -threads2 -y -r 10 -i /tmpdir/image%04d.jpg -i audio.mp3 -absf aac_adtstoasc output.mp4</span><br></pre></td></tr></table></figure>

<h2 id="环境："><a href="#环境：" class="headerlink" title="环境："></a>环境：</h2><p>JDK 1.8</p>
<h2 id="完整代码如下"><a href="#完整代码如下" class="headerlink" title="完整代码如下"></a>完整代码如下</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ffmpeg -ss 10 -i input.flv -y -f image2  -vframes 100 -s 352x240 b-%03d.jpg  </span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ffmpeg 截图，并指定图片的大小</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcVideoPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tarImagePath</span></span><br><span class="line"><span class="comment">     *            截取后图片路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> width</span></span><br><span class="line"><span class="comment">     *            截图的宽</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hight</span></span><br><span class="line"><span class="comment">     *            截图的高</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> offsetValue</span></span><br><span class="line"><span class="comment">     *            表示相对于文件开始处的时间偏移值 可以是分秒</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> vframes</span></span><br><span class="line"><span class="comment">     *            表示截图的桢数</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">processFfmpegImage</span><span class="params">(String srcVideoPath, String tarImagePath, <span class="type">int</span> width, <span class="type">int</span> hight,</span></span><br><span class="line"><span class="params">            <span class="type">float</span> offsetValue, <span class="type">float</span> vframes)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!checkfile(srcVideoPath)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;【&quot;</span> + srcVideoPath + <span class="string">&quot;】  不存在 !&quot;</span>);</span><br><span class="line">            <span class="comment">// logger.error(&quot;【&quot; + srcVideoPath + &quot;】 不存在 !&quot;);</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; commend = <span class="keyword">new</span> <span class="title class_">java</span>.util.ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        commend.add(ffmpegPath);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-i&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(srcVideoPath);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-y&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-f&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;image2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(offsetValue + <span class="string">&quot;&quot;</span>); <span class="comment">// 在视频的某个插入时间截图，例子为5秒后</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// commend.add(&quot;-vframes&quot;);</span></span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-t&quot;</span>);<span class="comment">// 添加参数＂-t＂，该参数指定持续时间</span></span><br><span class="line"></span><br><span class="line">        commend.add(vframes + <span class="string">&quot;&quot;</span>); <span class="comment">// 截图的桢数,添加持续时间为1毫秒</span></span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-s&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(width + <span class="string">&quot;x&quot;</span> + hight); <span class="comment">// 截图的的大小</span></span><br><span class="line"></span><br><span class="line">        commend.add(tarImagePath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ProcessBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>();</span><br><span class="line">            builder.command(commend);</span><br><span class="line">            builder.redirectErrorStream(<span class="literal">true</span>);</span><br><span class="line">            <span class="comment">// builder.redirectOutput(new File(&quot;F:/123/log/log.log&quot;));</span></span><br><span class="line">            <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> builder.start();</span><br><span class="line">            doWaitFor(process);</span><br><span class="line">            process.destroy();</span><br><span class="line">            <span class="keyword">if</span> (!checkfile(tarImagePath)) &#123;</span><br><span class="line">                System.out.println(tarImagePath + <span class="string">&quot; is not exit!  processFfmpegImage 转换不成功 !&quot;</span>);</span><br><span class="line">                <span class="comment">// logger.info(tarImagePath + &quot; is not exit! processFfmpegImage</span></span><br><span class="line">                <span class="comment">// 转换不成功 !&quot;);</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;【&quot;</span> + srcVideoPath + <span class="string">&quot;】 processFfmpegImage  转换不成功 !&quot;</span>);</span><br><span class="line">            <span class="comment">// logger.error(&quot;【&quot; + srcVideoPath + &quot;】 processFfmpegImage 转换不成功</span></span><br><span class="line">            <span class="comment">// !&quot;);</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">processFfmpegAudio</span><span class="params">(String srcVideoPath, String tarAudioPath)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!checkfile(srcVideoPath)) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;【&quot;</span> + srcVideoPath + <span class="string">&quot;】  不存在 !&quot;</span>);</span><br><span class="line">            <span class="comment">// logger.error(&quot;【&quot; + srcVideoPath + &quot;】 不存在 !&quot;);</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// https://blog.csdn.net/xiaocao9903/article/details/53420519</span></span><br><span class="line">        <span class="comment">// ffmpeg -i 3.mp4 -vn -y -acodec copy 3.aac</span></span><br><span class="line">        <span class="comment">// ffmpeg -i 3.mp4 -vn -y -acodec copy 3.m4a</span></span><br><span class="line">        </span><br><span class="line">        List&lt;String&gt; commend = <span class="keyword">new</span> <span class="title class_">java</span>.util.ArrayList&lt;String&gt;();</span><br><span class="line">        </span><br><span class="line">        commend.add(ffmpegPath);</span><br><span class="line">        </span><br><span class="line">        commend.add(<span class="string">&quot;-i&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        commend.add(srcVideoPath);</span><br><span class="line">        </span><br><span class="line">        commend.add(<span class="string">&quot;-vn&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-y&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        commend.add(<span class="string">&quot;-acodec&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        commend.add(<span class="string">&quot;copy&quot;</span>); <span class="comment">// 在视频的某个插入时间截图，例子为5秒后</span></span><br><span class="line">        </span><br><span class="line">        commend.add(tarAudioPath);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ProcessBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>();</span><br><span class="line">            builder.command(commend);</span><br><span class="line">            builder.redirectErrorStream(<span class="literal">true</span>);</span><br><span class="line">            <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> builder.start();</span><br><span class="line">            doWaitFor(process);</span><br><span class="line">            process.destroy();</span><br><span class="line">            <span class="keyword">if</span> (!checkfile(tarAudioPath)) &#123;</span><br><span class="line">                System.out.println(tarAudioPath + <span class="string">&quot; is not exit!  processFfmpegAudio 转换不成功 !&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;【&quot;</span> + srcVideoPath + <span class="string">&quot;】 processFfmpegAudio  转换不成功 !&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ffmpeg 合成视频</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcVideoPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tarImagePath</span></span><br><span class="line"><span class="comment">     *            截取后图片路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> width</span></span><br><span class="line"><span class="comment">     *            截图的宽</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hight</span></span><br><span class="line"><span class="comment">     *            截图的高</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> offsetValue</span></span><br><span class="line"><span class="comment">     *            表示相对于文件开始处的时间偏移值 可以是分秒</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> vframes</span></span><br><span class="line"><span class="comment">     *            表示截图的桢数</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">processFfmpegVideo</span><span class="params">(String imagePath, String audioPath, String tarVideoPath, <span class="type">int</span> step)</span> &#123;</span><br><span class="line">        <span class="comment">// https://blog.csdn.net/wangshuainan/article/details/77914508?fps=1&amp;locationNum=4</span></span><br><span class="line">        <span class="comment">// 带音频</span></span><br><span class="line">        <span class="comment">// ffmpeg -threads2 -y -r 10 -i /tmpdir/image%04d.jpg -i audio.mp3 -absf</span></span><br><span class="line">        <span class="comment">// aac_adtstoasc output.mp4</span></span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; commend = <span class="keyword">new</span> <span class="title class_">java</span>.util.ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        commend.add(ffmpegPath);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-threads&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        commend.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-y&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-r&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(step + <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-i&quot;</span>);</span><br><span class="line"></span><br><span class="line">        commend.add(imagePath); <span class="comment">// 图片</span></span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-i&quot;</span>);</span><br><span class="line"></span><br><span class="line">         commend.add(audioPath);</span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;-absf&quot;</span>);<span class="comment">// </span></span><br><span class="line"></span><br><span class="line">        commend.add(<span class="string">&quot;aac_adtstoasc&quot;</span>); <span class="comment">// </span></span><br><span class="line"></span><br><span class="line">        commend.add(tarVideoPath);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ProcessBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessBuilder</span>();</span><br><span class="line">            builder.command(commend);</span><br><span class="line">            builder.redirectErrorStream(<span class="literal">true</span>);</span><br><span class="line">             builder.redirectOutput(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;F:/123/log/log.log&quot;</span>));</span><br><span class="line">            <span class="type">Process</span> <span class="variable">process</span> <span class="operator">=</span> builder.start();</span><br><span class="line">            doWaitFor(process);</span><br><span class="line">            process.destroy();</span><br><span class="line">            <span class="keyword">if</span> (!checkfile(tarVideoPath)) &#123;</span><br><span class="line">                System.out.println(tarVideoPath + <span class="string">&quot; is not exit!  processFfmpegVideo 转换不成功 !&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;【&quot;</span> + tarVideoPath + <span class="string">&quot;】 processFfmpegVideo  转换不成功 !&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="源码地址："><a href="#源码地址：" class="headerlink" title="源码地址："></a>源码地址：</h2><p><a target="_blank" rel="noopener" href="https://github.com/Ruffianjiang/java4fun/tree/master/img2text">https://github.com/Ruffianjiang/java4fun/tree/master/img2text</a></p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/i_likechard/article/details/79032931">https://blog.csdn.net/i_likechard&#x2F;article&#x2F;details&#x2F;79032931</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaocao9903/article/details/53420519">https://blog.csdn.net/xiaocao9903/article/details/53420519</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangshuainan/article/details/77914508?fps=1&locationNum=4">https://blog.csdn.net/wangshuainan/article/details/77914508?fps=1&locationNum=4</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/yourijing/article/details/50786758">https://blog.csdn.net/yourijing/article/details/50786758</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/08/21/150-%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%9B%BE%E7%89%87%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/21/150-%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%9B%BE%E7%89%87%EF%BC%88%E4%BA%8C%EF%BC%89/" class="post-title-link" itemprop="url">图片转字符图片（二）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-08-21 00:23:00" itemprop="dateCreated datePublished" datetime="2018-08-21T00:23:00+08:00">2018-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/fun/" itemprop="url" rel="index"><span itemprop="name">fun</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h1><blockquote>
<p>这个是从抖音上学来的，一开始刷抖音，遇到不少字符串跳舞的视频，因此来实践一下</p>
</blockquote>
<h1 id="主要分为三个部分"><a href="#主要分为三个部分" class="headerlink" title="主要分为三个部分"></a>主要分为三个部分</h1><ol>
<li>静态图片转静态图片     </li>
<li>gif 转 gif    </li>
<li>视频转视频</li>
</ol>
<h1 id="gif-转-gif"><a href="#gif-转-gif" class="headerlink" title="gif 转 gif"></a>gif 转 gif</h1><blockquote>
<p>原理和静态图片的转换类似，这个需要每一帧的去转换。一开始的思路是把gif的每一帧转为图片，然后对图片进行转换，最后合成 gif 。<br>研究了 img4java，</p>
</blockquote>
<h2 id="效果如下所示："><a href="#效果如下所示：" class="headerlink" title="效果如下所示："></a>效果如下所示：</h2><p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/1.gif" alt="原图"> </p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/1_03.gif" alt="转换后1">  </p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/123.gif" alt="原图"> </p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/123_03.gif" alt="转换后1"> </p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/123_04.gif" alt="转换后2">  </p>
<h2 id="测试代码："><a href="#测试代码：" class="headerlink" title="测试代码："></a>测试代码：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">gifTest</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="string">&quot;F:/123/123.gif&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="string">&quot;F:/123/123_04.gif&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">base</span> <span class="operator">=</span> <span class="string">&quot;01&quot;</span>; <span class="comment">// 替换的字符串</span></span><br><span class="line">    <span class="comment">// String base = &quot;@#&amp;$%*o!;.&quot;;// 字符串由复杂到简单</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">threshold</span> <span class="operator">=</span> <span class="number">3</span>;<span class="comment">// 阈值</span></span><br><span class="line">    GifUtil.toTextGif(srcFile, targetFile, base, threshold);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/DamonRush/article/details/51746995">https://blog.csdn.net/DamonRush/article/details/51746995</a>、<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weiwangchao_/article/details/46520571">https://blog.csdn.net/weiwangchao_&#x2F;article&#x2F;details&#x2F;46520571</a>，<br>还有一些其他的工具（用了私有api，不推荐）<br><a target="_blank" rel="noopener" href="http://zhaorui1125.iteye.com/blog/2116816">http://zhaorui1125.iteye.com/blog/2116816</a>，<br>最后发现他们截出来的每一张图要么发红，要么模糊，只好放弃了。最后发现不需要把每一帧都保存下来，临时存一下就好，具体代码如下：</p>
<h2 id="环境："><a href="#环境：" class="headerlink" title="环境："></a>环境：</h2><p>JDK 1.8  </p>
<h2 id="完整代码如下："><a href="#完整代码如下：" class="headerlink" title="完整代码如下："></a>完整代码如下：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dawn.img2text.external.AnimatedGifEncoder;</span><br><span class="line"><span class="keyword">import</span> com.dawn.img2text.external.GifDecoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: GifUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> jiang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018年8月14日 下午9:47:29</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GifUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(GifUtil.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">toTextGif</span><span class="params">(<span class="keyword">final</span> String srcFile, <span class="keyword">final</span> String targetFile, <span class="keyword">final</span> String base, <span class="type">int</span> threshold)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">GifDecoder</span> <span class="variable">gd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GifDecoder</span>();</span><br><span class="line">            <span class="comment">// 要处理的图片</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">status</span> <span class="operator">=</span> gd.read(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(srcFile)));</span><br><span class="line">            <span class="keyword">if</span> (status != GifDecoder.STATUS_OK) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            <span class="type">AnimatedGifEncoder</span> <span class="variable">ge</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnimatedGifEncoder</span>();</span><br><span class="line">            <span class="comment">// 这里是关键，设置要替换成透明的颜色</span></span><br><span class="line">            ge.setTransparent(Color.WHITE);</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">            ge.start(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(targetFile)));</span><br><span class="line">            ge.setRepeat(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; gd.getFrameCount(); i++) &#123;</span><br><span class="line">                <span class="comment">// 取得gif的每一帧</span></span><br><span class="line">                <span class="type">BufferedImage</span> <span class="variable">frame</span> <span class="operator">=</span> gd.getFrame(i);</span><br><span class="line">                <span class="comment">// 你可以对每一帧做点什么，比如缩放什么的，这里就什么都不做了</span></span><br><span class="line">                <span class="type">int</span>[] rgb = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">                <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> frame.getWidth();</span><br><span class="line">                <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> frame.getHeight();</span><br><span class="line">                <span class="type">int</span> <span class="variable">minx</span> <span class="operator">=</span> frame.getMinX();</span><br><span class="line">                <span class="type">int</span> <span class="variable">miny</span> <span class="operator">=</span> frame.getMinY();</span><br><span class="line">                <span class="type">int</span> <span class="variable">delay</span> <span class="operator">=</span> gd.getDelay(i);</span><br><span class="line">                <span class="type">BufferedImage</span> <span class="variable">tag</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedImage</span>(width, height, BufferedImage.TYPE_4BYTE_ABGR);</span><br><span class="line">                <span class="type">Graphics</span> <span class="variable">g</span> <span class="operator">=</span> tag.getGraphics();</span><br><span class="line">                g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;微软雅黑&quot;</span>, Font.PLAIN, <span class="number">2</span>));<span class="comment">// 设置字体</span></span><br><span class="line">                g.setColor(Color.BLACK);<span class="comment">// 设置颜色</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> minx; x &lt; width; x += <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> miny; y &lt; height; y += <span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">pixel</span> <span class="operator">=</span> frame.getRGB(x, y); <span class="comment">// 下面三行代码将一个数字转换为RGB数字</span></span><br><span class="line">                        rgb[<span class="number">0</span>] = (pixel &amp; <span class="number">0xff0000</span>) &gt;&gt; <span class="number">16</span>;<span class="comment">// red</span></span><br><span class="line">                        rgb[<span class="number">1</span>] = (pixel &amp; <span class="number">0xff00</span>) &gt;&gt; <span class="number">8</span>;<span class="comment">// green</span></span><br><span class="line">                        rgb[<span class="number">2</span>] = (pixel &amp; <span class="number">0xff</span>);<span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line">                        <span class="keyword">final</span> <span class="type">float</span> <span class="variable">gray</span> <span class="operator">=</span> <span class="number">0.299F</span> * rgb[<span class="number">0</span>] + <span class="number">0.578F</span> * rgb[<span class="number">1</span>] + <span class="number">0.114F</span> * rgb[<span class="number">2</span>];</span><br><span class="line">                        <span class="comment">// index [0,base.length()),index越小颜色越深</span></span><br><span class="line">                        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> Math.round(gray * (base.length() + <span class="number">1</span>) / <span class="number">255</span>);</span><br><span class="line">                        <span class="keyword">if</span> (index &lt;= base.length() % threshold) &#123;</span><br><span class="line">                            g.drawString(String.valueOf(base.charAt(index % base.length())), x, y);<span class="comment">// 文字的编写及位置</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">/*-</span></span><br><span class="line"><span class="comment">                        if (rgb[0] + rgb[1] + rgb[2] &lt;= 300) &#123;</span></span><br><span class="line"><span class="comment">                            g.drawString(String.valueOf(base.charAt(index % base.length())), x, y);// 文字的编写及位置</span></span><br><span class="line"><span class="comment">                        &#125;*/</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                ge.setDelay(delay);</span><br><span class="line">                ge.addFrame(tag);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 输出图片</span></span><br><span class="line">            ge.finish();</span><br><span class="line">            logger.debug(<span class="string">&quot;&#123;&#125; toTextGif cost time： &#123;&#125;s&quot;</span>, srcFile, System.currentTimeMillis() - startTime);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;err&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原理和静态图转字符图片是一致，不再累述。</p>
<h2 id="源码地址："><a href="#源码地址：" class="headerlink" title="源码地址："></a>源码地址：</h2><p><a target="_blank" rel="noopener" href="https://github.com/Ruffianjiang/java4fun/tree/master/img2text">https://github.com/Ruffianjiang/java4fun/tree/master/img2text</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/08/21/150-%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%9B%BE%E7%89%87%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/08/21/150-%E5%9B%BE%E7%89%87%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%9B%BE%E7%89%87%EF%BC%88%E4%B8%80%EF%BC%89/" class="post-title-link" itemprop="url">图片转字符图片（一）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-08-21 00:02:00" itemprop="dateCreated datePublished" datetime="2018-08-21T00:02:00+08:00">2018-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/fun/" itemprop="url" rel="index"><span itemprop="name">fun</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h1><p>这个是从抖音上学来的，一开始刷抖音，遇到不少字符串跳舞的视频，因此来实践一下</p>
<h1 id="主要分为三个部分"><a href="#主要分为三个部分" class="headerlink" title="主要分为三个部分"></a>主要分为三个部分</h1><ol>
<li>静态图片转静态图片  </li>
<li>gif转gif  </li>
<li>视频转视频</li>
</ol>
<h1 id="静态图片转静态图片"><a href="#静态图片转静态图片" class="headerlink" title="静态图片转静态图片"></a>静态图片转静态图片</h1><p>其实原理很简单，读取图片的像素，新建一张大小一样的图片，根据原图像素的灰度，决定是不是要显示出来，并在新图相应的位置添加字符，这样就完成了</p>
<p>先来看下效果图，如下</p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/head.png?x-oss-process=style/default_blog" alt="原图"></p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/head_copy.png?x-oss-process=style/default_blog" alt="字符串后"></p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>借助前辈写的工具，主要包含一下四个类：<br>AnimatedGifEncoder<br>GifDecoder<br>LZWEncoder<br>NeuQuant</p>
<p>源地址:<a target="_blank" rel="noopener" href="https://github.com/rtyley/animated-gif-lib-for-java">https://github.com/rtyley/animated-gif-lib-for-java</a></p>
<p>ps: 网上各种版本的太多，不清楚这个是不是原作者，github上搜GifDecoder</p>
<h2 id="环境："><a href="#环境：" class="headerlink" title="环境："></a>环境：</h2><p>JDK 1.8</p>
<p>注：Java原生代码实现使用jdk内部的GIFImageReader、GIFImageWriter等类，maven在编译的时候会提示这是sun公司的私有API，在1.7、1.8版的JDK中已经删除，所以是有风险的。在此使用ImageIO这个类来进行图片的操作。</p>
<p>测试代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">imgTest</span><span class="params">()</span> </span><br><span class="line">    <span class="type">String</span> <span class="variable">inputFile</span> <span class="operator">=</span> <span class="string">&quot;F:/123/head.png&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">outputFile</span> <span class="operator">=</span> <span class="string">&quot;F:/123/head_copy.png&quot;</span>;</span><br><span class="line">    <span class="comment">// String base = &quot;01&quot;; // 替换的字符串</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">base</span> <span class="operator">=</span> <span class="string">&quot;@#&amp;$%*o!;.&quot;</span>;<span class="comment">// 字符串由复杂到简单</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">threshold</span> <span class="operator">=</span> <span class="number">8</span>;<span class="comment">// 阈值</span></span><br><span class="line">    ImgUtil.toTextImg(inputFile, outputFile, base, threshold);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参数调整"><a href="#参数调整" class="headerlink" title="参数调整"></a>参数调整</h2><p>具体参数调整如下图所示：  </p>
<p><img src="https://blog-lossingdawn.oss-cn-shanghai.aliyuncs.com/img2text/paranCode.png?x-oss-process=style/default_blog" alt="代码"></p>
<ol>
<li>调整字符大小，颜色    </li>
<li>调整字符间距    </li>
<li>调整字符的区域  （index数值越小，灰度越大）</li>
</ol>
<p>完整代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: ImgUtil</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> jiang</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018年8月14日 下午10:15:56</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImgUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(ImgUtil.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">toTextImg</span><span class="params">(String inputFile, String outputFile, <span class="keyword">final</span> String base, <span class="type">int</span> threshold)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        String blackFile = &quot;F:/123/head_black.png&quot;;</span></span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">src</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">tag</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">res</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            src = ImageIO.read(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(inputFile));</span><br><span class="line">            <span class="type">int</span>[] rgb = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> src.getWidth();</span><br><span class="line">            <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> src.getHeight();</span><br><span class="line">            <span class="type">int</span> <span class="variable">minx</span> <span class="operator">=</span> src.getMinX();</span><br><span class="line">            <span class="type">int</span> <span class="variable">miny</span> <span class="operator">=</span> src.getMinY();</span><br><span class="line">            <span class="comment">// 黑白化</span></span><br><span class="line"><span class="comment">/*-                        </span></span><br><span class="line"><span class="comment">            src = new ColorConvertOp(ColorSpace.getInstance(ColorSpace.CS_GRAY), null).filter(src, null);</span></span><br><span class="line"><span class="comment">            res = ImageIO.write(src, blackFile.substring(blackFile.lastIndexOf(&quot;.&quot;) + 1), new File(blackFile));</span></span><br><span class="line"><span class="comment">            src = ImageIO.read(new FileInputStream(blackFile));*/</span></span><br><span class="line"></span><br><span class="line">            tag = <span class="keyword">new</span> <span class="title class_">BufferedImage</span>(width, height, BufferedImage.TYPE_4BYTE_ABGR);</span><br><span class="line">            <span class="type">Graphics</span> <span class="variable">g</span> <span class="operator">=</span> tag.getGraphics();</span><br><span class="line">            g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="string">&quot;微软雅黑&quot;</span>, Font.PLAIN, <span class="number">10</span>));<span class="comment">// 设置字体</span></span><br><span class="line">            g.setColor(Color.BLUE);<span class="comment">// 设置颜色</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> minx; x &lt; width; x += <span class="number">6</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> miny; y &lt; height; y += <span class="number">6</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">pixel</span> <span class="operator">=</span> src.getRGB(x, y); <span class="comment">// 下面三行代码将一个数字转换为RGB数字</span></span><br><span class="line">                    rgb[<span class="number">0</span>] = (pixel &amp; <span class="number">0xff0000</span>) &gt;&gt; <span class="number">16</span>;<span class="comment">// red</span></span><br><span class="line">                    rgb[<span class="number">1</span>] = (pixel &amp; <span class="number">0xff00</span>) &gt;&gt; <span class="number">8</span>;<span class="comment">// green</span></span><br><span class="line">                    rgb[<span class="number">2</span>] = (pixel &amp; <span class="number">0xff</span>);<span class="comment">// blue</span></span><br><span class="line">                    <span class="keyword">final</span> <span class="type">float</span> <span class="variable">gray</span> <span class="operator">=</span> <span class="number">0.299f</span> * rgb[<span class="number">0</span>] + <span class="number">0.578f</span> * rgb[<span class="number">1</span>] + <span class="number">0.114f</span> * rgb[<span class="number">2</span>];</span><br><span class="line">                    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> Math.round(gray * (base.length() + <span class="number">1</span>) / <span class="number">255</span>);</span><br><span class="line"><span class="comment">//                    logger.debug(&quot;&#123;&#125;,&#123;&#125;&quot;,index,base.length() / threshold);</span></span><br><span class="line">                    <span class="keyword">if</span> (index &lt;= threshold) &#123;</span><br><span class="line">                        g.drawString(String.valueOf(base.charAt(index % base.length())), x, y);<span class="comment">// 文字的编写及位置</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">/*-</span></span><br><span class="line"><span class="comment">                    if (rgb[0] + rgb[1] + rgb[2] &lt;= 500) &#123;</span></span><br><span class="line"><span class="comment">                        System.out.println(&quot;i=&quot; + i + &quot;,j=&quot; + j + &quot;:(&quot; + rgb[0] + &quot;,&quot; + rgb[1] + &quot;,&quot; + rgb[2] + &quot;)&quot;);</span></span><br><span class="line"><span class="comment">                        g.drawString(&quot;v&quot;, i, j);// 文字的编写及位置</span></span><br><span class="line"><span class="comment">                    &#125;*/</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            g.dispose();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 输出图片</span></span><br><span class="line">            res = ImageIO.write(tag, outputFile.substring(outputFile.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>),</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">File</span>(outputFile));</span><br><span class="line">            logger.debug(<span class="string">&quot;字符化结果：&#123;&#125;&quot;</span>, res);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;err&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码的思路很简单，src.getRGB(x, y)获取具体像素点的颜色值，共六位，每两位一个颜色值，依次是red、green、blue,类似的使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(pixel &amp; 0xff0000) &gt;&gt; 16</span><br></pre></td></tr></table></figure>
<p>获取第一位的红色等，根据灰度公式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gray = R/*0.299 + G/*0.587 + B/*0.114</span><br></pre></td></tr></table></figure>
<p>计算灰度（百度颜色灰度公式，有很多来计算心理灰度的解决方案），选择合适的灰度替换上合适的字符即可</p>
<h2 id="源码地址："><a href="#源码地址：" class="headerlink" title="源码地址："></a>源码地址：</h2><ol>
<li><a target="_blank" rel="noopener" href="https://github.com/Ruffianjiang/java4fun/tree/master/img2text">https://github.com/Ruffianjiang/java4fun/tree/master/img2text</a></li>
</ol>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/chwshuang/article/details/64923345">https://blog.csdn.net/chwshuang/article/details/64923345</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/06/10/15-github%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%88%B0%EF%BC%8C%E7%99%BB%E9%99%86%E4%B8%8D%E4%B8%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/06/10/15-github%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%88%B0%EF%BC%8C%E7%99%BB%E9%99%86%E4%B8%8D%E4%B8%8A/" class="post-title-link" itemprop="url">github访问不到，登陆不上</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-06-10 13:50:00" itemprop="dateCreated datePublished" datetime="2018-06-10T13:50:00+08:00">2018-06-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/github/" itemprop="url" rel="index"><span itemprop="name">github</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>为github添加host</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\System32\drivers\etc</span><br></pre></td></tr></table></figure>

<p>在host文件添加如下两行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.30.253.112 github.com</span><br><span class="line">151.101.113.194 github.global.SSL.fastly.net</span><br></pre></td></tr></table></figure>

<p> 再次 ping github.com 解析后的ip就会强制指向host中的ip</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201806/670989-20180610134332071-1047669790.png"></p>
<p> </p>
<p>注1：</p>
<p>host文件修改需要权限，建议使用 <a target="_blank" rel="noopener" href="https://notepad-plus.en.softonic.com/">nodepad++</a> ，保存后会自动要求管理员权限，再次保存即可</p>
<p>注2：</p>
<p>关于IP的选择，可以去 <a target="_blank" rel="noopener" href="http://tool.chinaz.com/dns/">站长工具</a> 去查</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wl_521/article/details/80154063">https://blog.csdn.net/wl_521&#x2F;article&#x2F;details&#x2F;80154063</a></p>
<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/05/25/20-jdk%E5%AE%89%E8%A3%85%E9%94%99%E8%AF%AF1316%EF%BC%8Cjdk-10.0.1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/25/20-jdk%E5%AE%89%E8%A3%85%E9%94%99%E8%AF%AF1316%EF%BC%8Cjdk-10.0.1/" class="post-title-link" itemprop="url">jdk安装错误1316，jdk-10.0.1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-05-25 00:50:00" itemprop="dateCreated datePublished" datetime="2018-05-25T00:50:00+08:00">2018-05-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/jdk/" itemprop="url" rel="index"><span itemprop="name">jdk</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>打开注册表regedit ，定个位到</p>
<p>计算机\HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\</p>
<p>把jdk，jre下面的目录删掉。即10.0.1 ，问题解决</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180525004720215-2037377963.png"></p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lesorb/article/details/4389626">https://blog.csdn.net/lesorb/article/details/4389626</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/05/23/5-windows%E5%AE%89%E8%A3%85mongodb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/05/23/5-windows%E5%AE%89%E8%A3%85mongodb/" class="post-title-link" itemprop="url">windows安装mongodb</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-05-23 23:44:00" itemprop="dateCreated datePublished" datetime="2018-05-23T23:44:00+08:00">2018-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/db/" itemprop="url" rel="index"><span itemprop="name">db</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/db/mongo/" itemprop="url" rel="index"><span itemprop="name">mongo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="一、资源"><a href="#一、资源" class="headerlink" title="一、资源"></a>一、资源</h1><p>mongo下载地址：</p>
<p><a target="_blank" rel="noopener" href="https://www.mongodb.com/download-center/#community">https://www.mongodb.com/download-center/#community</a></p>
<p>romongo下载：</p>
<p><a target="_blank" rel="noopener" href="https://robomongo.org/">https://robomongo.org/</a></p>
<p>如下三个文件，（mongodb-compass可以不用下在，这是管理mongo用的图形化界面，习惯用romongo查询，studio3t可以自己学习使用）</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523230609258-1965975496.png"></p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523230624498-2048375172.png"></p>
<p>安装好以上软件，我本地的mongo安装到了d:tools\mongo 目录下，新建两个目录用于存储数据和日志</p>
<p>d:\tools\data\db  和  d:\tools\data\log</p>
<h1 id="二、初始化工作"><a href="#二、初始化工作" class="headerlink" title="二、初始化工作"></a>二、初始化工作</h1><p> 在命令行使用命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启动脚本</span><br><span class="line">D:\tools\mongo\bin\mongod --dbpath D:\tools\data\db</span><br><span class="line"></span><br><span class="line">连接脚本</span><br><span class="line">D:\tools\mongo\bin\mongo.exe</span><br></pre></td></tr></table></figure>

<p>出现  waiting for connetions on port 27017 ，则表示启动成功，ctrl+c可以关闭</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523231214127-696762503.png"></p>
<p>使用连接脚本连接数据库（新开一个命令行）</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523231314507-1741726332.png"></p>
<p>启动数据库命令行出现如下连接者的信息，连接成功</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523231548680-1994178827.png"></p>
<p>使用mongodb compass连接</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523231912505-440335011.png"></p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523231932604-1994370193.png"></p>
<p>romongo连接</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523232009239-2102787447.png"></p>
<p>后面主要使用romongo进行数据的查询，其中三种视图的切换</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523232601167-1448570459.png"></p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523232628501-270467638.png"></p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523232638818-290755981.png"></p>
<h1 id="三、mongo的配置"><a href="#三、mongo的配置" class="headerlink" title="三、mongo的配置"></a>三、mongo的配置</h1><p>配置 MongoDB 服务</p>
<p><em>创建一个配置文件位于 D:\tools\mongo\mongod.cfg<br>具体内容如下：</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemLog:</span><br><span class="line">destination: file</span><br><span class="line">path: D:\tools\data\log\mongod.log</span><br><span class="line">storage:</span><br><span class="line">dbPath: D:\tools\data\db</span><br></pre></td></tr></table></figure>


<p>安装 MongoDB服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\tools\mongo\bin\mongod.exe --config &quot;D:\tools\mongo\mongod.cfg&quot; --install</span><br></pre></td></tr></table></figure>

<p> </p>
<p>命令行需要管理员权限，没使用管理员权限的出现如下log信息</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523233935268-1055788732.png"></p>
<p>安装完成log信息如下：</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523234018623-1110298683.png"></p>
<p>在服务里可以找到MongoBD的服务</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201805/670989-20180523233703415-677450017.png"></p>
<p> </p>
<p>启动MongoDB服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start MongoDB</span><br></pre></td></tr></table></figure>

<p>关闭MongoDB服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop MongoDB</span><br></pre></td></tr></table></figure>

<p>移除 MongoDB 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\mongodb\bin\mongod.exe --remove</span><br></pre></td></tr></table></figure>

<p>其他的信息自行摸索吧，现在可以愉快的使用mongo了</p>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="http://www.runoob.com/mongodb/mongodb-window-install.html">http://www.runoob.com/mongodb/mongodb-window-install.html</a></p>
<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/04/25/6-Eclipse%E4%B8%ADCannot%20nest%20src%20folder%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/04/25/6-Eclipse%E4%B8%ADCannot%20nest%20src%20folder%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">Eclipse中Cannot nest src folder解决方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-04-25 09:04:00" itemprop="dateCreated datePublished" datetime="2018-04-25T09:04:00+08:00">2018-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ide/" itemprop="url" rel="index"><span itemprop="name">ide</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ide/eclipse/" itemprop="url" rel="index"><span itemprop="name">eclipse</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>错误示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">: Java Model Status [Cannot nest output folder &#x27;xxx/bin/main&#x27; inside output folder &#x27;xxx/bin&#x27;]</span><br></pre></td></tr></table></figure>

<p>解决方法：</p>
<p>右击项目 -&gt; properties -&gt; java build path -&gt; source</p>
<p><img src="https://images2018.cnblogs.com/blog/670989/201804/670989-20180425085906920-111690844.png"></p>
<p>一般是上图的红框的问题，这个已经改过的，报错的时候，是一个还未新建的文件夹目录&#x2F;bin&#x2F;main，解决方案如下图所示：</p>
<p> <img src="https://images2018.cnblogs.com/blog/670989/201804/670989-20180425090102781-1418976264.png"></p>
<p>第一种就是把allow output folders xxx 的勾选去掉</p>
<p>第二种不去勾选，把default output folder目录改到bin目录</p>
<p> </p>
<p>另外一种参考方法：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_30397435/article/details/78522566">https://blog.csdn.net/sinat_30397435/article/details/78522566</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">John Doe</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  






  





</body>
</html>
