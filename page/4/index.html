<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lossingdawn.top","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="今天又是充满希望的一天">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://lossingdawn.top/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="今天又是充满希望的一天">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Ruffianjiang">
<meta property="article:tag" content="java">
<meta property="article:tag" content="spring">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lossingdawn.top/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Hexo</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">今天又是充满希望的一天</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ruffianjiang</p>
  <div class="site-description" itemprop="description">今天又是充满希望的一天</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/34881.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/34881.html" class="post-title-link" itemprop="url">html提示框插件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2016-06-16 09:33:00" itemprop="dateCreated datePublished" datetime="2016-06-16T09:33:00+08:00">2016-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/html/" itemprop="url" rel="index"><span itemprop="name">html</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近工作需要，用到各式各样的提示框，寻找了很久，发现一个的第三方的插件很好用，各种样式、接口良好、允许自定义。</p>
<p>官网：<a target="_blank" rel="noopener" href="http://layer.layui.com/">http://layer.layui.com/</a></p>
<p>使用需要先引入jq1.8以上：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://libs.baidu.com/jquery/1.9.1/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;layer/layer.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/59950.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/59950.html" class="post-title-link" itemprop="url">ListView在ScrollView中不显示全部的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-09-22 10:27:00" itemprop="dateCreated datePublished" datetime="2015-09-22T10:27:00+08:00">2015-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在实际应用中，我们可能会遇到把ListView放到ScrollView中的情况，在这种情况下，ListView的滑动属性与ScrollView的滑动出现冲突，从而ListView只显示一项。这里提供一种解决方案，就是设置ListView中每个Item的高度显示之，使他失去滑动的属性，从而适应ScrollView的滑动。只需在填充数据之后设置即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * 通过设置它的高度，让它“放弃”自身滚动属性，而放置到ScrollView中使用的。</span><br><span class="line">     * </span><br><span class="line">     * @param lv</span><br><span class="line">     */</span><br><span class="line">    private void setListViewHeight(ListView lv) &#123;</span><br><span class="line">        ListAdapter la = lv.getAdapter();</span><br><span class="line">        if (null == la) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        // calculate height of all items.</span><br><span class="line">        int h = 0;</span><br><span class="line">        final int cnt = la.getCount();</span><br><span class="line">        for (int i = 0; i &lt; cnt; i++) &#123;</span><br><span class="line">            View item = la.getView(i, null, lv);</span><br><span class="line">            item.measure(0, 0);</span><br><span class="line">            h += item.getMeasuredHeight();</span><br><span class="line">        &#125;</span><br><span class="line">        // reset ListView height</span><br><span class="line">        ViewGroup.LayoutParams lp = lv.getLayoutParams();</span><br><span class="line">        lp.height = h + (lv.getDividerHeight() * (cnt - 1));</span><br><span class="line">        lv.setLayoutParams(lp);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/17352.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/17352.html" class="post-title-link" itemprop="url">安卓图片加载框架--Universal-Image-Loader</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-09-18 17:05:00" itemprop="dateCreated datePublished" datetime="2015-09-18T17:05:00+08:00">2015-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天来介绍图片加载的框架Android-Universal-Image-Loader</p>
<p>GITHUB上的下载路径为：<a target="_blank" rel="noopener" href="https://github.com/nostra13/Android-Universal-Image-Loader">https://github.com/nostra13/Android-Universal-Image-Loader</a></p>
<p>也可以自行百度下载。</p>
<p>首先来封装的一个类CacheTool ，由于其他加载图片的方法有点繁琐，所以这里仅封装了一个简单实用的加载方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">import android.content.Context;</span><br><span class="line">import android.graphics.Bitmap;</span><br><span class="line">import android.graphics.Bitmap.CompressFormat;</span><br><span class="line">import android.net.Uri;</span><br><span class="line">import android.os.Environment;</span><br><span class="line">import android.widget.ImageView;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line"></span><br><span class="line">import com.ncct.app.R;</span><br><span class="line">import com.nostra13.universalimageloader.cache.disc.impl.UnlimitedDiscCache;</span><br><span class="line">import com.nostra13.universalimageloader.cache.disc.naming.Md5FileNameGenerator;</span><br><span class="line">import com.nostra13.universalimageloader.cache.memory.impl.UsingFreqLimitedMemoryCache;</span><br><span class="line">import com.nostra13.universalimageloader.core.DisplayImageOptions;</span><br><span class="line">import com.nostra13.universalimageloader.core.ImageLoader;</span><br><span class="line">import com.nostra13.universalimageloader.core.ImageLoaderConfiguration;</span><br><span class="line">import com.nostra13.universalimageloader.core.assist.ImageLoadingListener;</span><br><span class="line">import com.nostra13.universalimageloader.core.assist.QueueProcessingType;</span><br><span class="line">import com.nostra13.universalimageloader.core.download.BaseImageDownloader;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 图片加载框架</span><br><span class="line"> * </span><br><span class="line"> * @author jiang</span><br><span class="line"> * </span><br><span class="line"> */</span><br><span class="line">public class CacheTool &#123;</span><br><span class="line"></span><br><span class="line">    private static File cacheDir = Environment.getDataDirectory();</span><br><span class="line">    private static DisplayImageOptions options = new DisplayImageOptions.Builder().showStubImage(R.drawable.loading_img)</span><br><span class="line">            .showImageForEmptyUri(R.drawable.loading_error).showImageOnFail(R.drawable.loading_error)</span><br><span class="line">            .cacheInMemory(true).cacheOnDisc(true).bitmapConfig(Bitmap.Config.RGB_565).build();</span><br><span class="line"></span><br><span class="line">    private static ImageLoaderConfiguration config;</span><br><span class="line"></span><br><span class="line">    public static void Init(Context context) &#123;</span><br><span class="line">        config = new ImageLoaderConfiguration.Builder(context).memoryCacheExtraOptions(480, 800) // max</span><br><span class="line">                                                                                                    // width,</span><br><span class="line">                                                                                                    // max</span><br><span class="line">                                                                                                    // height，即保存的每个缓存文件的最大长宽</span><br><span class="line">                .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75, null) // Can</span><br><span class="line">                                                                                // slow</span><br><span class="line">                                                                                // ImageLoader,</span><br><span class="line">                                                                                // use</span><br><span class="line">                                                                                // it</span><br><span class="line">                                                                                // carefully</span><br><span class="line">                                                                                // (Better</span><br><span class="line">                                                                                // don&#x27;t</span><br><span class="line">                                                                                // use</span><br><span class="line">                                                                                // it)/设置缓存的详细信息，最好不要设置这个</span><br><span class="line">                .threadPoolSize(3)// 线程池内加载的数量</span><br><span class="line">                .threadPriority(Thread.NORM_PRIORITY - 2).denyCacheImageMultipleSizesInMemory()</span><br><span class="line">                .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024)) // You</span><br><span class="line">                                                                                // can</span><br><span class="line">                                                                                // pass</span><br><span class="line">                                                                                // your</span><br><span class="line">                                                                                // own</span><br><span class="line">                                                                                // memory</span><br><span class="line">                                                                                // cache</span><br><span class="line">                                                                                // implementation/你可以通过自己的内存缓存实现</span><br><span class="line">                .memoryCacheSize(2 * 1024 * 1024).discCacheSize(50 * 1024 * 1024)</span><br><span class="line">                .discCacheFileNameGenerator(new Md5FileNameGenerator())// 将保存的时候的URI名称用MD5</span><br><span class="line">                                                                        // 加密</span><br><span class="line">                .tasksProcessingOrder(QueueProcessingType.LIFO).discCacheFileCount(100) // 缓存的文件数量</span><br><span class="line">                // .discCache(new UnlimitedDiscCache(cacheDir))// 自定义缓存路径</span><br><span class="line">                .defaultDisplayImageOptions(DisplayImageOptions.createSimple())</span><br><span class="line">                .imageDownloader(new BaseImageDownloader(context, 5 * 1000, 30 * 1000)) // connectTimeout</span><br><span class="line">                                                                                        // (5</span><br><span class="line">                                                                                        // s),</span><br><span class="line">                                                                                        // readTimeout</span><br><span class="line">                                                                                        // (30</span><br><span class="line">                                                                                        // s)超时时间</span><br><span class="line">                .writeDebugLogs() // Remove for release app</span><br><span class="line">                .build();// 开始构建</span><br><span class="line">        // Initialize ImageLoader with configuration.</span><br><span class="line">        ImageLoader.getInstance().init(config);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 加载图片并监听回调结果</span><br><span class="line">     * </span><br><span class="line">     * @param iv</span><br><span class="line">     * @param url</span><br><span class="line">     * @param mImageLoadingListener</span><br><span class="line">     */</span><br><span class="line">    public static void displayImg(ImageView iv, String url, ImageLoadingListener mImageLoadingListener) &#123;</span><br><span class="line">        ImageLoader.getInstance().displayImage(url, iv, options, mImageLoadingListener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 加载图片</span><br><span class="line">     * </span><br><span class="line">     * @param iv</span><br><span class="line">     * @param url</span><br><span class="line">     */</span><br><span class="line">    public static void displayImg(ImageView iv, String url) &#123;</span><br><span class="line"></span><br><span class="line">        ImageLoader.getInstance().displayImage(url, iv, options);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 清除内存</span><br><span class="line">     */</span><br><span class="line">    public static void clearMemoryCache() &#123;</span><br><span class="line">        ImageLoader.getInstance().clearMemoryCache();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 清除缓存</span><br><span class="line">     */</span><br><span class="line">    public static void clearDiskCache() &#123;</span><br><span class="line">        ImageLoader.getInstance().clearDiscCache();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 得到某个图片的缓存路径</span><br><span class="line">     * </span><br><span class="line">     * @param imageUrl</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getImagePath(String imageUrl) &#123;</span><br><span class="line">        return ImageLoader.getInstance().getDiscCache().get(imageUrl).getPath();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> </p>
<p>封装好了，里面都有详细的介绍，这里介绍下上面的中的ImageLoadingListener 接口回调，按ctrl + 鼠标左键可以进入jar包里的java文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">/*******************************************************************************</span><br><span class="line"> * Copyright 2011-2013 Sergey Tarasevich</span><br><span class="line"> *</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> * http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> *******************************************************************************/</span><br><span class="line">package com.nostra13.universalimageloader.core.assist;</span><br><span class="line"></span><br><span class="line">import android.graphics.Bitmap;</span><br><span class="line">import android.view.View;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Listener for image loading process.&lt;br /&gt;</span><br><span class="line"> * You can use &#123;@link SimpleImageLoadingListener&#125; for implementing only needed methods.</span><br><span class="line"> *</span><br><span class="line"> * @author Sergey Tarasevich (nostra13[at]gmail[dot]com)</span><br><span class="line"> * @see SimpleImageLoadingListener</span><br><span class="line"> * @see FailReason</span><br><span class="line"> * @since 1.0.0</span><br><span class="line"> */</span><br><span class="line">public interface ImageLoadingListener &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Is called when image loading task was started</span><br><span class="line">     *</span><br><span class="line">     * @param imageUri Loading image URI</span><br><span class="line">     * @param view     View for image</span><br><span class="line">     */</span><br><span class="line">    void onLoadingStarted(String imageUri, View view);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Is called when an error was occurred during image loading</span><br><span class="line">     *</span><br><span class="line">     * @param imageUri   Loading image URI</span><br><span class="line">     * @param view       View for image. Can be &lt;b&gt;null&lt;/b&gt;.</span><br><span class="line">     * @param failReason &#123;@linkplain FailReason The reason&#125; why image loading was failed</span><br><span class="line">     */</span><br><span class="line">    void onLoadingFailed(String imageUri, View view, FailReason failReason);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Is called when image is loaded successfully (and displayed in View if one was specified)</span><br><span class="line">     *</span><br><span class="line">     * @param imageUri    Loaded image URI</span><br><span class="line">     * @param view        View for image. Can be &lt;b&gt;null&lt;/b&gt;.</span><br><span class="line">     * @param loadedImage Bitmap of loaded and decoded image</span><br><span class="line">     */</span><br><span class="line">    void onLoadingComplete(String imageUri, View view, Bitmap loadedImage);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Is called when image loading task was cancelled because View for image was reused in newer task</span><br><span class="line">     *</span><br><span class="line">     * @param imageUri Loading image URI</span><br><span class="line">     * @param view     View for image. Can be &lt;b&gt;null&lt;/b&gt;.</span><br><span class="line">     */</span><br><span class="line">    void onLoadingCancelled(String imageUri, View view);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从以上代码中我们可以了解到接口中我们可以监听到开始、失败、完成、取消的动作。</p>
<p>现在开始使用吧：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">private ImageView My_Head;</span><br><span class="line">@Override</span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">    setContentView(R.layout.personcenter);</span><br><span class="line">    My_Head = (ImageView) findViewById(R.id.My_Head);</span><br><span class="line">            String Url = &quot;http://pic.nipic.com/2007-11-09/200711912453162_2.jpg&quot;;</span><br><span class="line">            CacheTool.displayImg(My_Head , Url );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> Mark一下，暂存一个直接通过URL获取bitmap的函数，未作内存处理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * 获取指定路径的图片</span><br><span class="line">     * </span><br><span class="line">     * @param urlpath</span><br><span class="line">     * @return</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public Bitmap getImage(String urlpath) throws Exception &#123;</span><br><span class="line">        URL url = new URL(urlpath);</span><br><span class="line">        HttpURLConnection conn = (HttpURLConnection) url.openConnection();</span><br><span class="line">        conn.setRequestMethod(&quot;GET&quot;);</span><br><span class="line">        conn.setConnectTimeout(5000);</span><br><span class="line">        Bitmap bitmap = null;</span><br><span class="line">        InputStream inputStream = conn.getInputStream();</span><br><span class="line">        bitmap = BitmapFactory.decodeStream(inputStream);</span><br><span class="line">        return bitmap;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/45182.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/45182.html" class="post-title-link" itemprop="url">移动应用图片的福音--七牛云存储</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-09-18 16:35:00" itemprop="dateCreated datePublished" datetime="2015-09-18T16:35:00+08:00">2015-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本篇来介绍移动应用图片存储的第三方，官方网址：<a target="_blank" rel="noopener" href="http://www.qiniu.com/">http://www.qiniu.com/</a></p>
<p>首先，在七牛上要注册开发者账号，需要认证身份证信息。认证完之后，我们来开始进行安卓端的开发。</p>
<p>一、准备信息</p>
<p>进行图片的上传与下载，我们需要准备几个信息，首先是空间名，然后是域名，再者是密钥对。如下图：</p>
<p><img src="https://images2015.cnblogs.com/blog/670989/201509/670989-20150918155902054-343110243.jpg"></p>
<p><img src="https://images2015.cnblogs.com/blog/670989/201509/670989-20150918155655398-238930394.jpg"></p>
<p>二、安卓端图片上传</p>
<p>首先我们需要导入JAR包，网址：<a target="_blank" rel="noopener" href="http://developer.qiniu.com/docs/v6/sdk/android-sdk.html">http://developer.qiniu.com/docs/v6/sdk/android-sdk.html</a></p>
<p>现在来编写上传相关的程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">private volatile boolean isCancelled = false;// 取消标志    　　 static String AccessKey =七牛上的公钥;</span><br><span class="line">    static String SecretKey =七牛上的私钥;</span><br><span class="line">    UploadManager uploadManager;</span><br><span class="line">        /**</span><br><span class="line">         *uploadManager有两种初始化方法，一种是默认配置，一种的自动逸配置</span><br><span class="line">        */</span><br><span class="line">        // 默认配置</span><br><span class="line">        uploadManager=new UploadManager();</span><br><span class="line">        //自定义配置</span><br><span class="line">        Configuration config= new Configuration.Builder().chunkSize(256 * 1024) // 分片上传时，每片的大小。</span><br><span class="line">                                                                        // 默认</span><br><span class="line">                                                                        // 256K</span><br><span class="line">                    .putThreshhold(512 * 1024) // 启用分片上传阀值。默认 512K</span><br><span class="line">                    .connectTimeout(10) // 链接超时。默认 10秒</span><br><span class="line">                    .responseTimeout(60) // 服务器响应超时。默认 60秒</span><br><span class="line">                    // .recorder(recorder) // recorder 分片上传时，已上传片记录器。默认 null</span><br><span class="line">                    // .recorder(recorder, keyGen) // keyGen</span><br><span class="line">                    // 分片上传时，生成标识符，用于片记录器区分是那个文件的上传记录</span><br><span class="line">                    .build();</span><br><span class="line">            // 重用 uploadManager。一般地，只需要创建一个 uploadManager 对象</span><br><span class="line">            uploadManager = new UploadManager(config);</span><br></pre></td></tr></table></figure>

<p>初始化配置搞定了，下面来进行上传操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">String _uploadToken = getUploadToken(scope); 　　　　 uploadManager.put(SAVE_FILE_DIRECTORY, // 本地上传路径、文件、字符串</span><br><span class="line">            key, // 网站上的名字</span><br><span class="line">            _uploadToken, // 验证信息</span><br><span class="line">            new UpCompletionHandler() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void complete(String key, ResponseInfo info, JSONObject response) &#123;</span><br><span class="line">                    Log.e(&quot;qiniu&quot;, info.toString());</span><br><span class="line">                    Log.i(&quot;是否成功&quot;, String.valueOf(info.isOK()));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            new UploadOptions(null, // 自定义变量，key必须以 x: 开始。</span><br><span class="line">                    &quot;webp&quot;, // 指定文件的mimeType。</span><br><span class="line">                    false, // 是否验证上传文件。</span><br><span class="line">                    new UpProgressHandler() &#123; // 上传进度回调。</span><br><span class="line">                        public void progress(String key, double percent) &#123;</span><br><span class="line">                            Log.i(&quot;qiniu&quot;, key + &quot;: &quot; + percent);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, new UpCancellationSignal() &#123; // 取消上传，当isCancelled()返回true时，不再执行更多上传。</span><br><span class="line">                        public boolean isCancelled() &#123;</span><br><span class="line">                            return isCancelled;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<p>在上传的操作中唯一需要我们头疼的就是_uploadToken，下面来介绍如何生成一个_uploadToken令牌信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public String getUploadToken(String scope) &#123;</span><br><span class="line">    // 构造上传策略</span><br><span class="line">    JSONObject json = new JSONObject();</span><br><span class="line">    long dataline = System.currentTimeMillis() / 1000 + 3600;</span><br><span class="line">    String uploadToken = null;</span><br><span class="line">    try &#123;</span><br><span class="line">        json.put(&quot;deadline&quot;, dataline);// 有效时间为一个小时</span><br><span class="line">        json.put(&quot;scope&quot;, scope);// 上传空间</span><br><span class="line">        String encodedPutPolicy = UrlSafeBase64.encodeToString(json.toString().getBytes());</span><br><span class="line">        byte[] sign = HmacSHA1Encrypt(encodedPutPolicy, SecretKey);</span><br><span class="line">        String encodedSign = UrlSafeBase64.encodeToString(sign);</span><br><span class="line">        uploadToken = AccessKey + &#x27;:&#x27; + encodedSign + &#x27;:&#x27; + encodedPutPolicy;// 登录信息token=公钥：加密的json信息：原始json信息</span><br><span class="line">    &#125; catch (JSONException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    return uploadToken;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/////////////// ************************************/////////////////////////</span><br><span class="line">/**</span><br><span class="line"> * 使用 HMAC-SHA1 签名方法对对encryptText进行签名</span><br><span class="line"> * </span><br><span class="line"> * @param encryptText</span><br><span class="line"> *            被签名的字符串</span><br><span class="line"> * @param encryptKey</span><br><span class="line"> *            密钥</span><br><span class="line"> * @return</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">private static final String MAC_NAME = &quot;HmacSHA1&quot;;</span><br><span class="line">private static final String ENCODING = &quot;UTF-8&quot;;</span><br><span class="line"></span><br><span class="line">private byte[] HmacSHA1Encrypt(String encryptText, String encryptKey) throws Exception &#123;</span><br><span class="line">    byte[] data = encryptKey.getBytes(ENCODING);</span><br><span class="line">    // 根据给定的字节数组构造一个密钥,第二参数指定一个密钥算法的名称</span><br><span class="line">    SecretKey secretKey = new SecretKeySpec(data, MAC_NAME);</span><br><span class="line">    // 生成一个指定 Mac 算法 的 Mac 对象</span><br><span class="line">    Mac mac = Mac.getInstance(MAC_NAME);</span><br><span class="line">    // 用给定密钥初始化 Mac 对象</span><br><span class="line">    mac.init(secretKey);</span><br><span class="line">    byte[] text = encryptText.getBytes(ENCODING);</span><br><span class="line">    // 完成 Mac 操作</span><br><span class="line">    return mac.doFinal(text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好了现在我们就可以成功上传了。</p>
<p>三、编写其他操作</p>
<p>1、取消操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 点击取消按钮，让 UpCancellationSignal#isCancelled() 方法返回 true ，以停止上传</span><br><span class="line"> */</span><br><span class="line">public void cancell() &#123;</span><br><span class="line">    isCancelled = true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、删除操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 删除指定空间、名称的资源</span><br><span class="line"> * </span><br><span class="line"> * @param bucket 空间名</span><br><span class="line"> * @param fileName 文件名</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">public boolean deleteFile(String bucket, String fileName) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        String entryUrl = bucket + &quot;:&quot; + fileName;</span><br><span class="line">        String encodedEntryURI = UrlSafeBase64.encodeToString(entryUrl.getBytes());</span><br><span class="line">        String host = &quot;http://rs.qiniu.com&quot;;</span><br><span class="line">        String path = &quot;/delete/&quot; + encodedEntryURI;</span><br><span class="line">        String url = host + path;</span><br><span class="line">        byte[] sign = HmacSHA1Encrypt(path + &quot;\n&quot;, SecretKey);</span><br><span class="line">        String encodedSign = UrlSafeBase64.encodeToString(sign);</span><br><span class="line">        String authorization = AccessKey + &#x27;:&#x27; + encodedSign;</span><br><span class="line">        HttpClient httpClient = new DefaultHttpClient();</span><br><span class="line">        HttpPost mothod = new HttpPost(url);</span><br><span class="line">        mothod.setHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">        mothod.setHeader(&quot;Authorization&quot;, &quot;QBox &quot; + authorization);</span><br><span class="line">        // 连接超时时间</span><br><span class="line">        httpClient.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, 20000);</span><br><span class="line">        // 读取超时时间</span><br><span class="line">        httpClient.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, 20000);</span><br><span class="line">        HttpResponse response = httpClient.execute(mothod);</span><br><span class="line">        StatusLine statusLine = response.getStatusLine();</span><br><span class="line">        int statusCode = statusLine.getStatusCode();</span><br><span class="line">        if (statusCode == HttpStatus.SC_OK) &#123;</span><br><span class="line">            Log.e(&quot;删除结果&quot;, &quot;successful&quot;);</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    Log.e(&quot;删除结果&quot;, &quot;false&quot;);</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好了，暂时就先到这里，虽然进行了一些封装，但是对自己的封装不很满意所以暂时不发了，以后封装完善了再发吧，这些已经足够新手理解了。下篇介绍获取网络图片并显示。主要用到目前最好的图片加载框架ImageLoad。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/61104.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/61104.html" class="post-title-link" itemprop="url">（转）android自定义控件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-08-10 14:31:00" itemprop="dateCreated datePublished" datetime="2015-08-10T14:31:00+08:00">2015-08-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>原帖地址：<a target="_blank" rel="noopener" href="http://my.oschina.net/wangjunhe/blog/99764"><strong>http://my.oschina.net/wangjunhe/blog/99764</strong></a></strong></p>
<p><strong>创建新的控件：</strong></p>
<p>作为一个有创意的开发者，你经常会遇到安卓原生控件无法满足你的需求。</p>
<p>为了优化你的界面和工作流程，安卓允许你去继承已经存在的控件或者实现你自己的控件。
 </p>
<p><strong>那么最好的方式去创建一个新的控件是什么？</strong>  这主要取决你想要完成什么。</p>
<p>1.有些基本功能原生控件都能提供，所以这个时候你只需要<strong>继承并对控件进行扩展</strong>。通过重写它的事件，onDraw,但是始终都保持都父类方法的调用。</p>
<p>2.组合控件 就是通过合并几个控件的功能来生成一个控件。</p>
<p>3.完完整整创建一个新的控件。</p>
<p><strong>1.修改存在的控件</strong></p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    public class MyTextView extends TextView &#123;</span><br><span class="line"> </span><br><span class="line">    public MyTextView(Context context, AttributeSet ats, int defStyle) &#123;</span><br><span class="line">        super(context, ats, defStyle);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public MyTextView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public MyTextView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public void onDraw(Canvas canvas) &#123;</span><br><span class="line">        // 在画布上画文本之下的内容</span><br><span class="line">         </span><br><span class="line">        // 保证默认的文本渲染</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line">         </span><br><span class="line">        // 在画布上画文本之上的内容</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public boolean onKeyDown(int keyCode, KeyEvent keyEvent) &#123;</span><br><span class="line">        // 写自己的控制</span><br><span class="line">         </span><br><span class="line">        // 保持父类默认的控制</span><br><span class="line">        return super.onKeyDown(keyCode, keyEvent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.组合控件</strong></p>
<p><strong>1.最简单的方式，是定义了XML布局文件，然后用include实现重用。（。。。这也算啊。。。）</strong></p>
<p><strong>2.去合并一个控件 通常你自定义的控件需要继承一个ViewGroup（通常就是Layout），就像：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    public class MyCompoundView extends LinearLayout &#123;</span><br><span class="line">    public MyCompoundView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public MyCompoundView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>      就像activity，比较好的设计一个混合的控件UI布局是使用一个外部的layout资源。</p>
<p>      这里我们模拟定义一个：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=”1.0” encoding=”utf-8”?&gt; </span><br><span class="line">  &lt;LinearLayout xmlns:android=”http://schemas.android.com/apk/res/android” </span><br><span class="line">   android:orientation=”vertical” </span><br><span class="line">   android:layout_width=”match_parent” </span><br><span class="line">   android:layout_height=”wrap_content”&gt; </span><br><span class="line">   &lt;EditText</span><br><span class="line">      android:id=”@+id/editText” </span><br><span class="line">      android:layout_width=”match_parent” </span><br><span class="line">      android:layout_height=”wrap_content” </span><br><span class="line">   /&gt; </span><br><span class="line">   &lt;Button</span><br><span class="line">      android:id=”@+id/clearButton” </span><br><span class="line">      android:layout_width=”match_parent” </span><br><span class="line">      android:layout_height=”wrap_content” </span><br><span class="line">      android:text=”Clear” </span><br><span class="line">   /&gt; </span><br><span class="line"> &lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>** <strong>然后在构造函数初始化的时候：</strong>**</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">    public class ClearableEditText extends LinearLayout &#123;</span><br><span class="line"> </span><br><span class="line">    EditText editText;</span><br><span class="line">    Button clearButton;</span><br><span class="line"> </span><br><span class="line">    public ClearableEditText(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line"> </span><br><span class="line">        // Inflate the view from the layout resource.</span><br><span class="line">        String infService = Context.LAYOUT_INFLATER_SERVICE;</span><br><span class="line">        LayoutInflater li;</span><br><span class="line"> </span><br><span class="line">        li = (LayoutInflater) getContext().getSystemService(infService);</span><br><span class="line">                /*这句很关键，解析反射资源文件，然后将布局附加到当前的控件，也就是this*/</span><br><span class="line">        li.inflate(R.layout.clearable_edit_text, this, true); </span><br><span class="line"> </span><br><span class="line">        /* 因为反射成功后的布局已经附加上了，那么直接可以findViewById*/</span><br><span class="line">        editText = (EditText) findViewById(R.id.editText); </span><br><span class="line">        clearButton = (Button) findViewById(R.id.clearButton);</span><br><span class="line"> </span><br><span class="line">        // 下面自定义的方法就是为控件注册监听，不解释了</span><br><span class="line">        hookupButton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用：在activity_main.xml</strong></p>
<p> </p>
<h3 id=""><a href="#" class="headerlink" title="&lt;com.example.customview.MyCompoundView android:layout_width&#x3D;”match_parent” android:layout_height&#x3D;”wrap_content” &#x2F;&gt;"></a>&lt;com.example.customview.MyCompoundView android:layout_width&#x3D;”match_parent” android:layout_height&#x3D;”wrap_content” &#x2F;&gt;</h3><h3 id="3-完完全全自定义控件"><a href="#3-完完全全自定义控件" class="headerlink" title="3. 完完全全自定义控件"></a>3. 完完全全自定义控件</h3><p>通常是继承View或者SurfaceView ，View类提供一个Canvas（画布）和一系列的画的方法，还有Paint（画笔）。使用它们去创建一个自定义的UI。你可以重写事件，包括屏幕接触或者按键按下等等，用来提供与用户交互。</p>
<p>1.如果你不需要快速重画和3D图像的效果，那么让View作为父类提供一个轻量级的解决方案。</p>
<p>2.如若不然，就需要使用SurfaceView作为父类，这样你就可以提供一个后台线程去画和使用OPENGL去实现你的图像。这个就相对重量级了，如果你的视图需要经常更新，然后由需要显示比较复杂的图像信息（尤其是在游戏和3D可视化），SurfaceView将是更好的选择。</p>
<p>在这里我们讨论前者，后者后期再讨论。</p>
<p> <strong>一般你需要重写2个方法： <br>1.onMeasure</strong><br>什么是onMeasure?</p>
<p>下面转载一段文章：</p>
<p>View在屏幕上显示出来要先经过measure（计算）和layout（布局）. <br>1、什么时候调用onMeasure方法？  <br>当控件的父元素正要放置该控件时调用.父元素会问子控件一个问题，“你想要用多大地方啊？”，然后传入两个参数——widthMeasureSpec和heightMeasureSpec. <br>这两个参数指明控件可获得的空间以及关于这个空间描述的元数据.</p>
<p>更好的方法是你传递View的高度和宽度到setMeasuredDimension方法里,这样可以直接告诉父控件，需要多大地方放置子控件.</p>
<p>widthMeasureSpec和heightMeasureSpec这2个参数都是整形是出于效率的考虑，所以经常要做的就是对其解码&#x3D;&gt;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. int specMode = MeasureSpec.getMode(measureSpec);</span><br><span class="line">1. int specSize = MeasureSpec.getSize(measureSpec);</span><br></pre></td></tr></table></figure>
<p>  </p>
<ol>
<li><p>依据specMode的值，（MeasureSpec有3种模式分别是UNSPECIFIED, EXACTLY和AT_MOST）</p>
</li>
<li><p>如果是AT_MOST，specSize 代表的是最大可获得的空间； <br>如果是EXACTLY，specSize 代表的是精确的尺寸； <br>如果是UNSPECIFIED，对于控件尺寸来说，没有任何参考意义。</p>
</li>
</ol>
<p> </p>
<p>2、那么这些模式和我们平时设置的layout参数fill_parent, wrap_content有什么关系呢？ <br>经过代码测试就知道，当我们设置width或height为fill_parent时，容器在布局时调用子 view的measure方法传入的模式是EXACTLY，因为子view会占据剩余容器的空间，所以它大小是确定的。 <br>而当设置为 wrap_content时，容器传进去的是AT_MOST, 表示子view的大小最多是多少，这样子view会根据这个上限来设置自己的尺寸。当子view的大小设置为精确值时，容器传入的是EXACTLY, 而MeasureSpec的UNSPECIFIED模式表示你没有指定大小。</p>
<ol>
<li>View的onMeasure方法默认行为是当模式为UNSPECIFIED时，设置尺寸为mMinWidth(通常为0)或者背景drawable的最小尺寸，当模式为EXACTLY或者AT_MOST时，尺寸设置为传入的MeasureSpec的大小。  <br>有个观念需要纠正的是，fill_parent应该是子view会占据剩下容器的空间，而不会覆盖前面已布局好的其他view空间，当然后面布局子 view就没有空间给分配了，所以fill_parent属性对布局顺序很重要。以前所想的是把所有容器的空间都占满了，难怪google在2.2版本里 把fill_parent的名字改为match_parent. <br>在两种情况下，你必须绝对的处理这些限制。在一些情况下，它可能会返回超出这些限制的尺寸，在这种情况下，你可以让父元素选择如何对待超出的View，使用裁剪还是滚动等技术。 <br>接下来的框架代码给出了处理View测量的典型实现：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">    int measuredHeight = measureHeight(heightMeasureSpec);</span><br><span class="line">    int measuredWidth = measureWidth(widthMeasureSpec);</span><br><span class="line"> </span><br><span class="line">    setMeasuredDimension(measuredHeight, measuredWidth); // 记住这句可不能省。</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">private int measureHeight(int measureSpec) &#123;</span><br><span class="line">    int specMode = MeasureSpec.getMode(measureSpec);</span><br><span class="line">    int specSize = MeasureSpec.getSize(measureSpec);</span><br><span class="line"> </span><br><span class="line">    // Default size if no limits are specified.</span><br><span class="line">    int result = 500;</span><br><span class="line"> </span><br><span class="line">    if (specMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">        // Calculate the ideal size of your</span><br><span class="line">        // control within this maximum size.</span><br><span class="line">        // If your control fills the available</span><br><span class="line">        // space return the outer bound.</span><br><span class="line">        result = specSize;</span><br><span class="line">    &#125; else if (specMode == MeasureSpec.EXACTLY) &#123;</span><br><span class="line">        // If your control can fit within these bounds return that value.</span><br><span class="line">        result = specSize;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">private int measureWidth(int measureSpec) &#123;</span><br><span class="line">    // 代码基本类似measureHeight</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>总结：</strong></p>
<p><strong>通过</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int specMode = MeasureSpec.getMode(measureSpec); </span><br><span class="line">int specSize = MeasureSpec.getSize(measureSpec);</span><br></pre></td></tr></table></figure>


<p><strong>这2个值，然后计算自己想要占有的宽和高。</strong></p>
<p><strong>2.onDraw</strong></p>
<p>这个不解释了。（后期会细说canvas和paint）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/36850.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/36850.html" class="post-title-link" itemprop="url">Android值类型转换</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-06-04 16:58:00" itemprop="dateCreated datePublished" datetime="2015-06-04T16:58:00+08:00">2015-06-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>各种数字类型转换成字符串型：<br>String s &#x3D; String.valueOf(value); &#x2F;&#x2F; 其中 value 为任意一种数字类型。<br>字符串型转换成各种数字类型：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String s = &quot;169&quot;;</span><br><span class="line">byte b = Byte.parseByte( s );</span><br><span class="line">short t = Short.parseShort( s );</span><br><span class="line">int i = Integer.parseInt( s );</span><br><span class="line">long l = Long.parseLong( s );</span><br><span class="line">Float f = Float.parseFloat( s );</span><br><span class="line">Double d = Double.parseDouble( s );</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/15985.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/15985.html" class="post-title-link" itemprop="url">【Android UI】顶部or底部菜单的循环滑动效果一</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-04-30 07:45:00" itemprop="dateCreated datePublished" datetime="2015-04-30T07:45:00+08:00">2015-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="实现了分页的滑动效果，做的demo流畅运行"><a href="#实现了分页的滑动效果，做的demo流畅运行" class="headerlink" title="实现了分页的滑动效果，做的demo流畅运行"></a>实现了分页的滑动效果，做的demo流畅运行</h1><h1 id="注：貌似支持的样式（控件）有一定的限制，我试过短信的listview页面，暂无法实现滑动效果"><a href="#注：貌似支持的样式（控件）有一定的限制，我试过短信的listview页面，暂无法实现滑动效果" class="headerlink" title="注：貌似支持的样式（控件）有一定的限制，我试过短信的listview页面，暂无法实现滑动效果"></a>注：貌似支持的样式（控件）有一定的限制，我试过短信的listview页面，暂无法实现滑动效果</h1><p>java文件:MainActivity.java、Activity1.java、Activity2.java、Activity3.java、Activity4.java</p>
<p>MainActivity.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">package com.example.tabhostmove;</span><br><span class="line"></span><br><span class="line">import android.app.Activity;</span><br><span class="line">import android.app.TabActivity;</span><br><span class="line">import android.content.Intent;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.util.Log;</span><br><span class="line">import android.view.GestureDetector;</span><br><span class="line">import android.view.Menu;</span><br><span class="line">import android.view.MenuItem;</span><br><span class="line">import android.view.MotionEvent;</span><br><span class="line">import android.widget.TabHost;</span><br><span class="line">import android.widget.TabHost.TabSpec;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class MainActivity extends TabActivity &#123;</span><br><span class="line">    private TabHost tabHost;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    private void init() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        </span><br><span class="line">        tabHost = getTabHost();</span><br><span class="line">        // 页面1</span><br><span class="line">        TabSpec spec1 = tabHost.newTabSpec(&quot;1&quot;);</span><br><span class="line">        spec1.setIndicator(&quot;1&quot;, getResources().getDrawable(R.drawable.ic_launcher));</span><br><span class="line">        Intent intent1 = new Intent(this, Activity1.class);</span><br><span class="line">        spec1.setContent(intent1);</span><br><span class="line"></span><br><span class="line">        // 页面2</span><br><span class="line">        TabSpec spec2 = tabHost.newTabSpec(&quot;2&quot;);</span><br><span class="line">        spec2.setIndicator(&quot;2&quot;, getResources().getDrawable(R.drawable.ic_launcher));</span><br><span class="line">        Intent intent2 = new Intent(this, Activity2.class);</span><br><span class="line">        spec2.setContent(intent2);</span><br><span class="line"></span><br><span class="line">        // 页面3</span><br><span class="line">        TabSpec spec3 = tabHost.newTabSpec(&quot;3&quot;);</span><br><span class="line">        spec3.setIndicator(&quot;3&quot;, getResources().getDrawable(R.drawable.ic_launcher));</span><br><span class="line">        Intent intent3 = new Intent(this, Activity3.class);</span><br><span class="line">        spec3.setContent(intent3);</span><br><span class="line">        </span><br><span class="line">        // 页面4</span><br><span class="line">        TabSpec spec4 = tabHost.newTabSpec(&quot;4&quot;);</span><br><span class="line">        spec4.setIndicator(&quot;4&quot;, getResources().getDrawable(R.drawable.ic_launcher));</span><br><span class="line">        Intent intent4 = new Intent(this, Activity4.class);</span><br><span class="line">        spec4.setContent(intent4);</span><br><span class="line"></span><br><span class="line">        tabHost.addTab(spec1);</span><br><span class="line">        tabHost.addTab(spec2);</span><br><span class="line">        tabHost.addTab(spec3);</span><br><span class="line">        tabHost.addTab(spec4);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private GestureDetector detector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) &#123;</span><br><span class="line">            if ((e2.getRawX() - e1.getRawX()) &gt; 80) &#123;</span><br><span class="line">                showNext();</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if ((e1.getRawX() - e2.getRawX()) &gt; 80) &#123;</span><br><span class="line">                showPre();</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">            return super.onFling(e1, e2, velocityX, velocityY);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onTouchEvent(MotionEvent event) &#123;</span><br><span class="line">        detector.onTouchEvent(event);</span><br><span class="line">        return super.onTouchEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 当前页面索引</span><br><span class="line">     */</span><br><span class="line">    int i = 0;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 显示下一个页面</span><br><span class="line">     */</span><br><span class="line">    protected void showNext() &#123;</span><br><span class="line">        // 三元表达式控制3个页面的循环.</span><br><span class="line">        //tabHost.setCurrentTab(i = i == 3 ? i = 0 : ++i);</span><br><span class="line">        //Log.i(&quot;kennet&quot;, i + &quot;&quot;);</span><br><span class="line">        //四个页面的下一个循环</span><br><span class="line">        switch(i)</span><br><span class="line">        &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            i++;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            i++;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line">        case 2:</span><br><span class="line">            i++;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line">        case 3:</span><br><span class="line">            i=0;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 显示前一个页面</span><br><span class="line">     */</span><br><span class="line">    protected void showPre() &#123;</span><br><span class="line">        // 三元表达式控制3个页面的循环.</span><br><span class="line">        //tabHost.setCurrentTab(i = i == 0 ? i = 3 : --i);</span><br><span class="line">        //四个页面的上一个循环</span><br><span class="line">        switch(i)</span><br><span class="line">        &#123;</span><br><span class="line">        case 0:</span><br><span class="line">            i=3;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line">        case 1:</span><br><span class="line">            i--;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line">        case 2:</span><br><span class="line">            i--;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line">        case 3:</span><br><span class="line">            i--;</span><br><span class="line">            tabHost.setCurrentTab(i);</span><br><span class="line">            break;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onCreateOptionsMenu(Menu menu) &#123;</span><br><span class="line">        // Inflate the menu; this adds items to the action bar if it is present.</span><br><span class="line">        getMenuInflater().inflate(R.menu.main, menu);</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onOptionsItemSelected(MenuItem item) &#123;</span><br><span class="line">        // Handle action bar item clicks here. The action bar will</span><br><span class="line">        // automatically handle clicks on the Home/Up button, so long</span><br><span class="line">        // as you specify a parent activity in AndroidManifest.xml.</span><br><span class="line">        int id = item.getItemId();</span><br><span class="line">        if (id == R.id.action_settings) &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return super.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>xml布局文件：activity_main.xml、activit1.xml、activit2.xml、activit3.xml、activit4.xml</p>
<p>activity_main.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;TabHost xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:id=&quot;@android:id/tabhost&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:layout_width=&quot;fill_parent&quot;</span><br><span class="line">        android:layout_height=&quot;fill_parent&quot;</span><br><span class="line">        android:orientation=&quot;vertical&quot; &gt;</span><br><span class="line"></span><br><span class="line">        &lt;TabWidget</span><br><span class="line">            android:id=&quot;@android:id/tabs&quot;</span><br><span class="line">            android:layout_width=&quot;fill_parent&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;FrameLayout</span><br><span class="line">            android:id=&quot;@android:id/tabcontent&quot;</span><br><span class="line">            android:layout_width=&quot;fill_parent&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_weight=&quot;1&quot; &gt;</span><br><span class="line">        &lt;/FrameLayout&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">&lt;/TabHost&gt;</span><br></pre></td></tr></table></figure>

<p>注：activity1、2、3、4是测试的页面，随便建几个即可，别忘了在AndroidManifest.xml里注册页面的活动</p>
<p>实现效果：</p>
<p><img src="https://images0.cnblogs.com/blog2015/670989/201504/300743591616715.png"></p>
<p><img src="https://images0.cnblogs.com/blog2015/670989/201504/300744157246089.png"></p>
<p><img src="https://images0.cnblogs.com/blog2015/670989/201504/300744254742911.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/48435.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/48435.html" class="post-title-link" itemprop="url">【Android UI】侧滑栏的使用（HorizontalScrollView控件的使用）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-04-29 16:12:00" itemprop="dateCreated datePublished" datetime="2015-04-29T16:12:00+08:00">2015-04-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>主要的用到的控件：HorizontalScrollView</p>
<p>主要的功能：把几张图片解析成一张图片，在一个容器中呈现。</p>
<p>布局文件xml</p>
<p>side_bar_scollview.xml&#x2F;&#x2F;显示view的容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;HorizontalScrollView</span><br><span class="line">        android:id=&quot;@+id/MyScrollView&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot; &gt;</span><br><span class="line"></span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:id=&quot;@+id/ll_layout&quot;</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;match_parent&quot;</span><br><span class="line">            android:orientation=&quot;horizontal&quot; &gt;</span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/HorizontalScrollView&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>home.xml&#x2F;&#x2F;显示的主页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot; </span><br><span class="line">    android:background=&quot;@drawable/home_bg&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=&quot;@+id/textView1&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;主页&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>menu.xml&#x2F;&#x2F;显示的菜单页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot; </span><br><span class="line">    android:background=&quot;@drawable/menu_bg&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=&quot;@+id/textView1&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:text=&quot;菜单&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/FrameLayout&gt;</span><br></pre></td></tr></table></figure>

<p>MainActivity.java&#x2F;&#x2F;主活动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">package com.example.side_bar_scrollview;</span><br><span class="line"></span><br><span class="line">import android.annotation.SuppressLint;</span><br><span class="line">import android.app.Activity;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.ViewTreeObserver.OnGlobalLayoutListener;</span><br><span class="line">import android.widget.HorizontalScrollView;</span><br><span class="line">import android.widget.LinearLayout;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line"></span><br><span class="line">    private HorizontalScrollView scrollview;</span><br><span class="line">    private LinearLayout view_layout;</span><br><span class="line">    private int width;</span><br><span class="line">    private int height;</span><br><span class="line">    private View home_view;</span><br><span class="line">    private View menu_view;</span><br><span class="line">    private float rate=0.4f;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        //关联界面ID</span><br><span class="line">        setContentView(R.layout.side_bar_scollview);</span><br><span class="line">        //关联控件ID</span><br><span class="line">        scrollview=(HorizontalScrollView) findViewById(R.id.MyScrollView);</span><br><span class="line">        view_layout=(LinearLayout) findViewById(R.id.ll_layout);</span><br><span class="line">        //监听布局</span><br><span class="line">        MyLayoutListener();</span><br><span class="line">        //隐藏滚动条</span><br><span class="line">        scrollview.setHorizontalScrollBarEnabled(false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 监听布局的变化</span><br><span class="line">     *  1.getViewTreeObserver --- view事件的观察者</span><br><span class="line">     *   2.addOnGlobalLayoutListener</span><br><span class="line">     * 当在一个视图树中全局布局发生改变或者视图树中的某个视图的可视状态发生改变时，</span><br><span class="line">     * 所要调用的回调函数的接口类</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">        private void MyLayoutListener()&#123;</span><br><span class="line">        </span><br><span class="line">        scrollview.getViewTreeObserver().addOnGlobalLayoutListener(</span><br><span class="line">                new OnGlobalLayoutListener() &#123;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onGlobalLayout() &#123;</span><br><span class="line">                // TODO Auto-generated method stub</span><br><span class="line">                //移除之前已经注册的全局布局的回调函数，使图片不会循环连在一起</span><br><span class="line">                view_layout.getViewTreeObserver()</span><br><span class="line">                    .removeOnGlobalLayoutListener(this);</span><br><span class="line">                //获取最后一次调用measure()测量得到的scrollview的宽和高</span><br><span class="line">                height = scrollview.getMeasuredHeight();</span><br><span class="line">                width = scrollview.getMeasuredWidth();</span><br><span class="line">                //解析主页和菜单的布局</span><br><span class="line">                home_view=getLayoutInflater().inflate(R.layout.home,</span><br><span class="line">                        null);</span><br><span class="line">                menu_view=getLayoutInflater().inflate(R.layout.menu,</span><br><span class="line">                        null);</span><br><span class="line">                //添加view到view_layout</span><br><span class="line">                view_layout.addView(menu_view, (int)(width*rate), height);</span><br><span class="line">                view_layout.addView(home_view, width, height);</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>效果图：</p>
<p><img src="https://images0.cnblogs.com/blog2015/670989/201504/291611398658418.png"></p>
<p><img src="https://images0.cnblogs.com/blog2015/670989/201504/291611527717910.png"></p>
<p> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/30030.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/30030.html" class="post-title-link" itemprop="url">Android问题解决</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-04-26 19:26:00" itemprop="dateCreated datePublished" datetime="2015-04-26T19:26:00+08:00">2015-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>1、clean之后R文件消失</strong></p>
<p>clean之后R文件消失是因为布局的XML文件存在错误，无法编译你的资源文件，所以无法自动生成R文件，在Problem、LogCat等界面查看错误的原因，把错误改正即可；</p>
<p>此外还有可能是引用问题，查看开头的import是否错误的引用了android的组件，把他删掉，重新引用具体包的路径。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lossingdawn.top/p/zh-CN/57847.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ruffianjiang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="今天又是充满希望的一天">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/p/zh-CN/57847.html" class="post-title-link" itemprop="url">Android 设置 横屏 竖屏</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2015-04-26 18:59:00" itemprop="dateCreated datePublished" datetime="2015-04-26T18:59:00+08:00">2015-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-06 10:17:14" itemprop="dateModified" datetime="2023-11-06T10:17:14+08:00">2023-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>方法一：在AndroidManifest.xml中配置</p>
<p>如果不想让软件在横竖屏之间切换，最简单的办法就是在项目的AndroidManifest.xml中找到你所指定的activity中加上android:screenOrientation属性，他有以下几个参数：</p>
<p>“unspecified”:默认值 由系统来判断显示方向.判定的策略是和设备相关的，所以不同的设备会有不同的显示方向. <br>“landscape”:横屏显示（宽比高要长） <br>“portrait”:竖屏显示(高比宽要长) <br>“user”:用户当前首选的方向 <br>“behind”:和该Activity下面的那个Activity的方向一致(在Activity堆栈中的) <br>“sensor”:有物理的感应器来决定。如果用户旋转设备这屏幕会横竖屏切换。 <br>“nosensor”:忽略物理感应器，这样就不会随着用户旋转设备而更改了（”unspecified”设置除外）。</p>
<p> </p>
<p>方法二：在java代码中设置</p>
<p>设置横屏代码：setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);&#x2F;&#x2F;横屏</p>
<p>设置竖屏代码：setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);&#x2F;&#x2F;竖屏</p>
<p>因为横屏有两个方向的横法，而这个设置横屏的语句，如果不是默认的横屏方向，会把已经横屏的屏幕旋转180°。</p>
<p>所以可以先判断是否已经为横屏了，如果不是再旋转，不会让用户觉得转的莫名其妙啦！代码如下：</p>
<p>if(this.getResources().getConfiguration().orientation &#x3D;&#x3D;Configuration.ORIENTATION_PORTRAIT){<br>   setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);</p>
<p>}</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ruffianjiang</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  






  





</body>
</html>
